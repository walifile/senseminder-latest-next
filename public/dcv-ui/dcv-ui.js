import e from"dcv";import t,{useEffect as n,memo as r,useRef as o,useState as i,useCallback as a,useMemo as s}from"react";import c from"prop-types";import{Popover as l,StatusIndicator as d,Button as u,Modal as m,Box as p,SpaceBetween as h,Textarea as f,Grid as g,Link as b,Tabs as v,RadioGroup as y,Alert as w,Select as E,ColumnLayout as S,Toggle as x,ButtonDropdown as k,Header as M,LineChart as O,Pagination as C,BreadcrumbGroup as R,Table as I,Icon as T,Input as F,Container as D,Badge as A,ProgressBar as B,Spinner as N}from"@cloudscape-design/components";import{applyMode as _,Mode as P,applyDensity as $,Density as L}from"@cloudscape-design/global-styles";import{colorChartsPaletteCategorical1 as j,colorChartsPaletteCategorical2 as z,colorChartsPaletteCategorical3 as W,colorBackgroundContainerHeader as U,colorBorderDividerDefault as V,colorBackgroundContainerContent as q}from"@cloudscape-design/design-tokens";import H from"@babel/runtime/helpers/extends";import G from"react-dom";var Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},K={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,i||e,a),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],s]:e._events[c].push(s):(e._events[c]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var c,l,d=this._events[s],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,o),!0;case 5:return d.fn.call(d.context,t,r,o,i),!0;case 6:return d.fn.call(d.context,t,r,o,i,a),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var m,p=d.length;for(l=0;l<p;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),u){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,r);break;case 4:d[l].fn.call(d[l].context,t,r,o);break;default:if(!c)for(m=1,c=new Array(u-1);m<u;m++)c[m-1]=arguments[m];d[l].fn.apply(d[l].context,c)}}return!0},s.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||o&&!s.once||r&&s.context!==r||a(this,i);else{for(var c=0,l=[],d=s.length;c<d;c++)(s[c].fn!==t||o&&!s[c].once||r&&s[c].context!==r)&&l.push(s[c]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(K);const Y=new(0,K.exports),Z={on:(e,t)=>Y.on(e,t),once:(e,t)=>Y.once(e,t),off:(e,t)=>Y.off(e,t),emit:(e,...t)=>Y.emit(e,...t)};Object.freeze(Z);var J,X,ee,te={exports:{}};X=Q,ee=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),o=0;o<r.length;o++){var i=r[o];this[i]=o<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function d(r,o,i){return function(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?s:void 0!==console[r]?a(console,r):void 0!==console.log?a(console,"log"):e)}(r)||l.apply(this,arguments)}function u(e,n){var a,s,l,u=this,m="loglevel";function p(){var e;if(typeof window!==t&&m){try{e=window.localStorage[m]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(m),o=n.indexOf(r+"=");-1!==o&&(e=/^([^;]+)/.exec(n.slice(o+r.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function h(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?m+=":"+e:"symbol"==typeof e&&(m=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||d,u.getLevel=function(){return null!=l?l:null!=s?s:a},u.setLevel=function(e,n){return l=h(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&m){try{return void(window.localStorage[m]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(m)+"="+n+";"}catch(e){}}}(l),c.call(u)},u.setDefaultLevel=function(e){s=h(e),p()||u.setLevel(e,!1)},u.resetLevel=function(){l=null,function(){if(typeof window!==t&&m){try{window.localStorage.removeItem(m)}catch(e){}try{window.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),c.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(i!==u&&(a=h(i.getLevel())),c.call(u),i===u)for(var e in o)o[e].rebuild()},a=h(i?i.getLevel():"WARN");var f=p();null!=f&&(l=h(f)),c.call(u)}(i=new u).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new u(e,i.methodFactory)),t};var m=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=m),i},i.getLoggers=function(){return o},i.default=i,i},(J=te).exports?J.exports=ee():X.log=ee();var ne=te.exports;const re=ne.getLogger("DCV-web-sdk-UI");class oe{constructor(e){this.name=e,this.dateObject=new Date}trace(e){const t=this.dateObject;t.setTime(Date.now()),re.trace(`${t.toISOString()} - [UI][${this.name}] TRACE ${e}`)}debug(e){const t=this.dateObject;t.setTime(Date.now()),re.debug(`${t.toISOString()} - [UI][${this.name}] DEBUG ${e}`)}info(e){const t=this.dateObject;t.setTime(Date.now()),re.info(`${t.toISOString()} - [UI][${this.name}] INFO ${e}`)}warn(e){const t=this.dateObject;t.setTime(Date.now()),re.warn(`${t.toISOString()} - [UI][${this.name}] WARN ${e}`)}error(e){const t=this.dateObject;t.setTime(Date.now()),re.error(`${t.toISOString()} - [UI][${this.name}] ERROR ${e}`)}}function ie(e){return new oe(e)}function ae(e){return"function"==typeof e}function se(e){return null==e}function ce(e){return!se(e)&&"object"==typeof e&&!Array.isArray(e)}function le(e){return e.charAt(0).toUpperCase()+e.slice(1)}function de(e,n,r){const o=n||"20px",i=r||"0";return t.createElement("div",{style:{padding:`${i} ${o}`}},e)}function ue(e){return(e||window).document.documentElement.clientHeight}function me(e){return-1!==["available","attached","streaming"].indexOf(e)}const pe={label:"Auto-hide toolbar",description:"Automatically hide the toolbar and display it only moving the mouse to the top border."},he={label:"Auto-hide toolbar only in full screen",description:"Fix the bar on the top only in windowed mode."},fe={label:"Always display the toolbar",description:"Fix the bar on the top."},ge="Light mode",be="Dark mode",ve="System default",ye={label:"Best responsiveness",description:"Provide most fluid experience.",minQuality:20,maxQuality:90},we={label:"Best quality",description:"Provide best image quality.",minQuality:70,maxQuality:90},Ee="adaptive",Se="current",xe=[{width:1920,height:1080},{width:1440,height:900},{width:1024,height:768},{width:800,height:600}];let ke;function Me(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)")&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener&&window.matchMedia("(prefers-color-scheme: dark)").removeEventListener}function Oe(){return ke}Me()&&(ke=window.matchMedia("(prefers-color-scheme: dark)"));const Ce=(e,t)=>{_(e.matches?P.Dark:P.Light,t)},Re=(e,t)=>{switch(e){case ve:ke&&Ce(ke,t);break;case ge:_(P.Light,t);break;case be:_(P.Dark,t)}};ie("Settings");const Ie={sessionId:"",authToken:"",extensionData:"",promptReconnect:!0,logLevel:"info",wss:!0,enabledChannels:[],customChannels:[],displayCodecs:[],enableQU:!0,minQuality:30,maxQuality:0,maxDisplayWidth:0,maxDisplayHeight:0,minDisplayWidth:640,minDisplayHeight:480,debugLayer:!1,enableGraphicsDebugLayer:!1,clientHiDpiScaling:!0,enableHighPixelDensity:!1,enableWebCodecs:!0,losslessColorspace:"rgb",dynamicResolution:!0,enableShortcutEditor:!1,scaleToFit:!1,volume:100,microphone:!1,webcam:!1,macOptionToAlt:!0,macCommandToControl:!1,appearanceMode:Me()?ve:ge,toolbarBehavior:he.label,displayQuality:ye.label,metricsEnabled:!1,selectedResolution:Ee,selectedWebcamId:null,highColorAccuracy:!1,forceKeyboardCombinations:!1,timezoneRedirectionEnabled:!1};function Te(){localStorage.setItem("dcv-settings",JSON.stringify(Ie))}let Fe,De,Ae={},Be=[];function Ne(e){De.queryFeature(e).then((t=>{ae(Ae[e])&&Ae[e](t)})).catch((t=>{Fe.info(`Query for ${e} denied with message: ${t.message}`)}))}function _e(e){e.length>0&&function(e){e.forEach((e=>{-1!==Object.keys(Ae).indexOf(e)?Ne(e):(Be.push(e),Fe&&Fe.info(`No callback for feature ${e} adding to pending.`))}))}(e)}function Pe(e,t){e&&ae(t)?(Ae[e]=t,Fe.info(`Added feature listener for: ${e}`),Fe.debug(`Callbacks ${Object.keys(Ae)}`),Fe.debug(`Pending updates ${Be}`),-1!==Be.indexOf(e)&&(Ne(e),Be.splice(Be.indexOf(e),1))):Fe.warn("Wrong parameters for addFeatureListener")}const $e={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Le={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},je={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},ze={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},We={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Ue{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map((e=>parseInt(e,10)||0));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const r=Ue.getVersionPrecision(e),o=Ue.getVersionPrecision(t);let i=Math.max(r,o),a=0;const s=Ue.map([e,t],(e=>{const t=i-Ue.getVersionPrecision(e),n=e+new Array(t+1).join(".0");return Ue.map(n.split("."),(e=>new Array(20-e.length).join("0")+e)).reverse()}));for(n&&(a=i-Math.min(r,o)),i-=1;i>=a;){if(s[0][i]>s[1][i])return 1;if(s[0][i]===s[1][i]){if(i===a)return 0;i-=1}else if(s[0][i]<s[1][i])return-1}}static map(e,t){const n=[];let r;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){const r=e[n];if(t(r,n))return r}}static assign(e,...t){const n=e;let r,o;if(Object.assign)return Object.assign(e,...t);for(r=0,o=t.length;r<o;r+=1){const e=t[r];if("object"==typeof e&&null!==e){Object.keys(e).forEach((t=>{n[t]=e[t]}))}}return e}static getBrowserAlias(e){return $e[e]}static getBrowserTypeByAlias(e){return Le[e]||""}}const Ve=/version\/(\d+(\.?_?\d+)+)/i,qe=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=Ue.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=Ue.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=Ue.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=Ue.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=Ue.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=Ue.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=Ue.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=Ue.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=Ue.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=Ue.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=Ue.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=Ue.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=Ue.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=Ue.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=Ue.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=Ue.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=Ue.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=Ue.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=Ue.getFirstMatch(Ve,e)||Ue.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=Ue.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=Ue.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=Ue.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=Ue.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=Ue.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=Ue.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=Ue.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=Ue.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=Ue.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=Ue.getFirstMatch(Ve,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:Ue.getFirstMatch(t,e),version:Ue.getSecondMatch(t,e)}}}];var He=[{test:[/Roku\/DVP/],describe(e){const t=Ue.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:ze.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=Ue.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:ze.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=Ue.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=Ue.getWindowsVersionName(t);return{name:ze.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:ze.iOS},n=Ue.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=Ue.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=Ue.getMacOSVersionName(t),r={name:ze.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=Ue.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:ze.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=Ue.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=Ue.getAndroidVersionName(t),r={name:ze.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=Ue.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:ze.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=Ue.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Ue.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Ue.getFirstMatch(/\bbb(\d+)/i,e);return{name:ze.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=Ue.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:ze.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=Ue.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:ze.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:ze.Linux})},{test:[/CrOS/],describe:()=>({name:ze.ChromeOS})},{test:[/PlayStation 4/],describe(e){const t=Ue.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:ze.PlayStation4,version:t}}}],Ge=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){const t=Ue.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:je.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:je.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:je.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:je.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:je.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:je.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:je.tablet})},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=Ue.getFirstMatch(/(ipod|iphone)/i,e);return{type:je.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:je.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:je.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:je.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:je.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:je.mobile,vendor:"Microsoft"})},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:je.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:je.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:je.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:je.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:je.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:je.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:je.tv})}],Qe=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:We.Blink};const t=Ue.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:We.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:We.Trident},n=Ue.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:e=>e.test(/presto/i),describe(e){const t={name:We.Presto},n=Ue.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:We.Gecko},n=Ue.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:We.Blink})},{test:[/(apple)?webkit/i],describe(e){const t={name:We.WebKit},n=Ue.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class Ke{constructor(e,t=!1){if(null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=Ue.find(qe,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=Ue.find(He,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=Ue.find(Ge,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=Ue.find(Qe,(e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some((e=>this.test(e)));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Ue.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const r={};let o=0;if(Object.keys(e).forEach((i=>{const a=e[i];"string"==typeof a?(r[i]=a,o+=1):"object"==typeof a&&(t[i]=a,n+=1)})),n>0){const e=Object.keys(t),n=Ue.find(e,(e=>this.isOS(e)));if(n){const e=this.satisfies(t[n]);if(void 0!==e)return e}const r=Ue.find(e,(e=>this.isPlatform(e)));if(r){const e=this.satisfies(t[r]);if(void 0!==e)return e}}if(o>0){const e=Object.keys(r),t=Ue.find(e,(e=>this.isBrowser(e,!0)));if(void 0!==t)return this.compareVersion(r[t])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let r=e.toLowerCase();const o=Ue.getBrowserTypeByAlias(r);return t&&o&&(r=o.toLowerCase()),r===n}compareVersion(e){let t=[0],n=e,r=!1;const o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(Ue.compareVersions(o,n,r))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some((e=>this.is(e)))}}
/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */const Ye=class{static getParser(e,t=!1){if("string"!=typeof e)throw new Error("UserAgent should be a string");return new Ke(e,t)}static parse(e){return new Ke(e).getResult()}static get BROWSER_MAP(){return Le}static get ENGINE_MAP(){return We}static get OS_MAP(){return ze}static get PLATFORMS_MAP(){return je}}.getParser(window.navigator.userAgent),Ze="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,Je=Ye.getOSName(!0);function Xe(){return!("tablet"!==Ye.getPlatformType(!0)&&!et())}function et(){return!!Ye.satisfies({macos:{safari:">=13"}})&&Ze}function tt(){return Ye}function nt(){return Ye.isBrowser("safari",!0)}function rt(){return"mobile"===Ye.getPlatformType(!0)}function ot(){return"macos"===Je}function it(){return"ios"===Je}const at=ot()||it()?"⌘":"CTRL",st=`Press [${at}+C] to copy content from remote clipboard.`,ct=`Press [${at}+V] to paste content to remote clipboard.`,lt="Clipboard synced",dt="success",ut=5e3,mt=ie("Clipboard");let pt="",ht="",ft=!1;function gt({connection:e,copyEnabled:r,pasteEnabled:o,currentWindow:i}){const[a,s]=t.useState(!1),[c,g]=t.useState(""),[b,v]=t.useState({}),[y,w]=t.useState({}),E=()=>{s(!1),e.captureClipboardEvents(!1,i)},S=(e,t)=>{a?(v({status:e,message:t}),i.document.getElementById("modal-popover-trigger").click()):(w({status:e,message:t}),i.document.getElementById("icon-popover-trigger").click())},x=()=>{ft||(S(dt,lt),("string"==typeof pt||pt instanceof String)&&g(pt))},k=()=>{ft||(S(dt,lt),("string"==typeof ht||ht instanceof String)&&g(ht))},M=()=>{S("error","The clipboard data is too large to be transferred"),ft=!0},O=e=>{switch(mt.info(`Received clipboard event ${e.name}`),e.name){case"established":break;case"copy":case"autoCopyDone":x();break;case"paste":case"autoPasteDone":k();break;case"dataSizeAlert":M();break;case"remoteError":"dataSizeAlert"===e.error&&M();break;case"newDataAvailable":e.autoCopy||S("info","Use the clipboard to copy data locally or remotely."),pt=e.clipboardData["text/plain"],ft=!1;break;case"pasteAvailableData":ht=e.clipboardData,ft=!1;break;default:mt.info("Unknown clipboard event.")}};return n((()=>(Z.on("clipboard",O),()=>{Z.off("clipboard",O)})),[i,a]),t.createElement("div",null,t.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"start",alignItems:"start"}},t.createElement("div",{style:{height:0}},t.createElement(l,{dismissButton:!1,position:"bottom",size:"large",triggerType:"custom",content:t.createElement(d,{type:y.status},y.message)},t.createElement("div",{id:"icon-popover-trigger"}))),t.createElement("div",{title:"Clipboard"},t.createElement(u,{iconName:"copy",variant:"icon",onClick:()=>{s(!0),g(""),e.captureClipboardEvents(!0,i)}}))),t.createElement(m,{onDismiss:E,visible:a,size:"large",header:"Copy and paste",footer:t.createElement(p,{float:"right"},t.createElement(u,{variant:"primary",onClick:E},"Done")),modalRoot:i.document.body},t.createElement(h,{size:"xl"},t.createElement(p,null,r&&t.createElement(p,{variant:"p"},st),o&&t.createElement(p,{variant:"p"},ct)),t.createElement(p,{variant:"p",margin:{bottom:"xs"}},"Content preview")),t.createElement("div",{style:{margin:"auto",width:"1px",height:0}},t.createElement(l,{dismissButton:!1,position:"top",size:"large",triggerType:"custom",content:t.createElement(d,{type:b.status},b.message)},t.createElement("div",{id:"modal-popover-trigger",style:{marginTop:"19.5px"}}))),t.createElement(f,{controlId:"textarea",value:(C=c,C.substring(0,ut).replace(/\0/g,"").concat(C.length>ut?" ...":"")),readOnly:!0,rows:10})));var C}gt.propTypes={connection:c.object,copyEnabled:c.bool,pasteEnabled:c.bool,currentWindow:c.object};var bt=r(gt),vt=function(e){return e&&e.Math==Math&&e},yt=vt("object"==typeof globalThis&&globalThis)||vt("object"==typeof window&&window)||vt("object"==typeof self&&self)||vt("object"==typeof Q&&Q)||function(){return this}()||Function("return this")(),wt={},Et=function(e){try{return!!e()}catch(e){return!0}},St=!Et((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),xt=!Et((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),kt=xt,Mt=Function.prototype.call,Ot=kt?Mt.bind(Mt):function(){return Mt.apply(Mt,arguments)},Ct={},Rt={}.propertyIsEnumerable,It=Object.getOwnPropertyDescriptor,Tt=It&&!Rt.call({1:2},1);Ct.f=Tt?function(e){var t=It(this,e);return!!t&&t.enumerable}:Rt;var Ft,Dt,At=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Bt=xt,Nt=Function.prototype,_t=Nt.bind,Pt=Nt.call,$t=Bt&&_t.bind(Pt,Pt),Lt=Bt?function(e){return e&&$t(e)}:function(e){return e&&function(){return Pt.apply(e,arguments)}},jt=Lt,zt=jt({}.toString),Wt=jt("".slice),Ut=function(e){return Wt(zt(e),8,-1)},Vt=Lt,qt=Et,Ht=Ut,Gt=yt.Object,Qt=Vt("".split),Kt=qt((function(){return!Gt("z").propertyIsEnumerable(0)}))?function(e){return"String"==Ht(e)?Qt(e,""):Gt(e)}:Gt,Yt=yt.TypeError,Zt=function(e){if(null==e)throw Yt("Can't call method on "+e);return e},Jt=Kt,Xt=Zt,en=function(e){return Jt(Xt(e))},tn=function(e){return"function"==typeof e},nn=tn,rn=function(e){return"object"==typeof e?null!==e:nn(e)},on=yt,an=tn,sn=function(e,t){return arguments.length<2?(n=on[e],an(n)?n:void 0):on[e]&&on[e][t];var n},cn=Lt({}.isPrototypeOf),ln=yt,dn=sn("navigator","userAgent")||"",un=ln.process,mn=ln.Deno,pn=un&&un.versions||mn&&mn.version,hn=pn&&pn.v8;hn&&(Dt=(Ft=hn.split("."))[0]>0&&Ft[0]<4?1:+(Ft[0]+Ft[1])),!Dt&&dn&&(!(Ft=dn.match(/Edge\/(\d+)/))||Ft[1]>=74)&&(Ft=dn.match(/Chrome\/(\d+)/))&&(Dt=+Ft[1]);var fn=Dt,gn=Et,bn=!!Object.getOwnPropertySymbols&&!gn((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&fn&&fn<41})),vn=bn&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,yn=sn,wn=tn,En=cn,Sn=vn,xn=yt.Object,kn=Sn?function(e){return"symbol"==typeof e}:function(e){var t=yn("Symbol");return wn(t)&&En(t.prototype,xn(e))},Mn=yt.String,On=tn,Cn=function(e){try{return Mn(e)}catch(e){return"Object"}},Rn=yt.TypeError,In=function(e){if(On(e))return e;throw Rn(Cn(e)+" is not a function")},Tn=Ot,Fn=tn,Dn=rn,An=yt.TypeError,Bn={exports:{}},Nn=yt,_n=Object.defineProperty,Pn=function(e,t){try{_n(Nn,e,{value:t,configurable:!0,writable:!0})}catch(n){Nn[e]=t}return t},$n=Pn,Ln="__core-js_shared__",jn=yt[Ln]||$n(Ln,{}),zn=jn;(Bn.exports=function(e,t){return zn[e]||(zn[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.20.3",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.20.3/LICENSE",source:"https://github.com/zloirock/core-js"});var Wn=Zt,Un=yt.Object,Vn=function(e){return Un(Wn(e))},qn=Lt({}.hasOwnProperty),Hn=Object.hasOwn||function(e,t){return qn(Vn(e),t)},Gn=Lt,Qn=0,Kn=Math.random(),Yn=Gn(1..toString),Zn=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Yn(++Qn+Kn,36)},Jn=yt,Xn=Bn.exports,er=Hn,tr=Zn,nr=bn,rr=vn,or=Xn("wks"),ir=Jn.Symbol,ar=ir&&ir.for,sr=rr?ir:ir&&ir.withoutSetter||tr,cr=function(e){if(!er(or,e)||!nr&&"string"!=typeof or[e]){var t="Symbol."+e;nr&&er(ir,e)?or[e]=ir[e]:or[e]=rr&&ar?ar(t):sr(t)}return or[e]},lr=Ot,dr=rn,ur=kn,mr=function(e,t){var n=e[t];return null==n?void 0:In(n)},pr=function(e,t){var n,r;if("string"===t&&Fn(n=e.toString)&&!Dn(r=Tn(n,e)))return r;if(Fn(n=e.valueOf)&&!Dn(r=Tn(n,e)))return r;if("string"!==t&&Fn(n=e.toString)&&!Dn(r=Tn(n,e)))return r;throw An("Can't convert object to primitive value")},hr=cr,fr=yt.TypeError,gr=hr("toPrimitive"),br=function(e,t){if(!dr(e)||ur(e))return e;var n,r=mr(e,gr);if(r){if(void 0===t&&(t="default"),n=lr(r,e,t),!dr(n)||ur(n))return n;throw fr("Can't convert object to primitive value")}return void 0===t&&(t="number"),pr(e,t)},vr=kn,yr=function(e){var t=br(e,"string");return vr(t)?t:t+""},wr=rn,Er=yt.document,Sr=wr(Er)&&wr(Er.createElement),xr=function(e){return Sr?Er.createElement(e):{}},kr=!St&&!Et((function(){return 7!=Object.defineProperty(xr("div"),"a",{get:function(){return 7}}).a})),Mr=St,Or=Ot,Cr=Ct,Rr=At,Ir=en,Tr=yr,Fr=Hn,Dr=kr,Ar=Object.getOwnPropertyDescriptor;wt.f=Mr?Ar:function(e,t){if(e=Ir(e),t=Tr(t),Dr)try{return Ar(e,t)}catch(e){}if(Fr(e,t))return Rr(!Or(Cr.f,e,t),e[t])};var Br={},Nr=St&&Et((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),_r=yt,Pr=rn,$r=_r.String,Lr=_r.TypeError,jr=function(e){if(Pr(e))return e;throw Lr($r(e)+" is not an object")},zr=St,Wr=kr,Ur=Nr,Vr=jr,qr=yr,Hr=yt.TypeError,Gr=Object.defineProperty,Qr=Object.getOwnPropertyDescriptor,Kr="enumerable",Yr="configurable",Zr="writable";Br.f=zr?Ur?function(e,t,n){if(Vr(e),t=qr(t),Vr(n),"function"==typeof e&&"prototype"===t&&"value"in n&&Zr in n&&!n[Zr]){var r=Qr(e,t);r&&r[Zr]&&(e[t]=n.value,n={configurable:Yr in n?n[Yr]:r[Yr],enumerable:Kr in n?n[Kr]:r[Kr],writable:!1})}return Gr(e,t,n)}:Gr:function(e,t,n){if(Vr(e),t=qr(t),Vr(n),Wr)try{return Gr(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Hr("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Jr=Br,Xr=At,eo=St?function(e,t,n){return Jr.f(e,t,Xr(1,n))}:function(e,t,n){return e[t]=n,e},to={exports:{}},no=tn,ro=jn,oo=Lt(Function.toString);no(ro.inspectSource)||(ro.inspectSource=function(e){return oo(e)});var io,ao,so,co=ro.inspectSource,lo=tn,uo=co,mo=yt.WeakMap,po=lo(mo)&&/native code/.test(uo(mo)),ho=Bn.exports,fo=Zn,go=ho("keys"),bo={},vo=po,yo=yt,wo=Lt,Eo=rn,So=eo,xo=Hn,ko=jn,Mo=function(e){return go[e]||(go[e]=fo(e))},Oo=bo,Co="Object already initialized",Ro=yo.TypeError,Io=yo.WeakMap;if(vo||ko.state){var To=ko.state||(ko.state=new Io),Fo=wo(To.get),Do=wo(To.has),Ao=wo(To.set);io=function(e,t){if(Do(To,e))throw new Ro(Co);return t.facade=e,Ao(To,e,t),t},ao=function(e){return Fo(To,e)||{}},so=function(e){return Do(To,e)}}else{var Bo=Mo("state");Oo[Bo]=!0,io=function(e,t){if(xo(e,Bo))throw new Ro(Co);return t.facade=e,So(e,Bo,t),t},ao=function(e){return xo(e,Bo)?e[Bo]:{}},so=function(e){return xo(e,Bo)}}var No={set:io,get:ao,has:so,enforce:function(e){return so(e)?ao(e):io(e,{})},getterFor:function(e){return function(t){var n;if(!Eo(t)||(n=ao(t)).type!==e)throw Ro("Incompatible receiver, "+e+" required");return n}}},_o=St,Po=Hn,$o=Function.prototype,Lo=_o&&Object.getOwnPropertyDescriptor,jo=Po($o,"name"),zo=jo&&"something"===function(){}.name,Wo=jo&&(!_o||_o&&Lo($o,"name").configurable),Uo=yt,Vo=tn,qo=Hn,Ho=eo,Go=Pn,Qo=co,Ko={EXISTS:jo,PROPER:zo,CONFIGURABLE:Wo}.CONFIGURABLE,Yo=No.get,Zo=No.enforce,Jo=String(String).split("String");(to.exports=function(e,t,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet,c=r&&void 0!==r.name?r.name:t;Vo(n)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!qo(n,"name")||Ko&&n.name!==c)&&Ho(n,"name",c),(o=Zo(n)).source||(o.source=Jo.join("string"==typeof c?c:""))),e!==Uo?(i?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=n:Ho(e,t,n)):a?e[t]=n:Go(t,n)})(Function.prototype,"toString",(function(){return Vo(this)&&Yo(this).source||Qo(this)}));var Xo={},ei=Math.ceil,ti=Math.floor,ni=function(e){var t=+e;return t!=t||0===t?0:(t>0?ti:ei)(t)},ri=ni,oi=Math.max,ii=Math.min,ai=ni,si=Math.min,ci=function(e){return e>0?si(ai(e),9007199254740991):0},li=en,di=function(e,t){var n=ri(e);return n<0?oi(n+t,0):ii(n,t)},ui=function(e){return ci(e.length)},mi=function(e){return function(t,n,r){var o,i=li(t),a=ui(i),s=di(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},pi={includes:mi(!0),indexOf:mi(!1)},hi=Hn,fi=en,gi=pi.indexOf,bi=bo,vi=Lt([].push),yi=function(e,t){var n,r=fi(e),o=0,i=[];for(n in r)!hi(bi,n)&&hi(r,n)&&vi(i,n);for(;t.length>o;)hi(r,n=t[o++])&&(~gi(i,n)||vi(i,n));return i},wi=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");Xo.f=Object.getOwnPropertyNames||function(e){return yi(e,wi)};var Ei={};Ei.f=Object.getOwnPropertySymbols;var Si=sn,xi=Xo,ki=Ei,Mi=jr,Oi=Lt([].concat),Ci=Si("Reflect","ownKeys")||function(e){var t=xi.f(Mi(e)),n=ki.f;return n?Oi(t,n(e)):t},Ri=Hn,Ii=Ci,Ti=wt,Fi=Br,Di=Et,Ai=tn,Bi=/#|\.prototype\./,Ni=function(e,t){var n=Pi[_i(e)];return n==Li||n!=$i&&(Ai(t)?Di(t):!!t)},_i=Ni.normalize=function(e){return String(e).replace(Bi,".").toLowerCase()},Pi=Ni.data={},$i=Ni.NATIVE="N",Li=Ni.POLYFILL="P",ji=Ni,zi=yt,Wi=wt.f,Ui=eo,Vi=to.exports,qi=Pn,Hi=function(e,t,n){for(var r=Ii(t),o=Fi.f,i=Ti.f,a=0;a<r.length;a++){var s=r[a];Ri(e,s)||n&&Ri(n,s)||o(e,s,i(t,s))}},Gi=ji,Qi=cn,Ki=yt.TypeError,Yi=yt,Zi=tn,Ji=Yi.String,Xi=Yi.TypeError,ea=Lt,ta=jr,na=function(e){if("object"==typeof e||Zi(e))return e;throw Xi("Can't set "+Ji(e)+" as a prototype")},ra=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=ea(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return ta(n),na(r),t?e(n,r):n.__proto__=r,n}}():void 0),oa=tn,ia=rn,aa=ra,sa={};sa[cr("toStringTag")]="z";var ca=yt,la="[object z]"===String(sa),da=tn,ua=Ut,ma=cr("toStringTag"),pa=ca.Object,ha="Arguments"==ua(function(){return arguments}()),fa=la?ua:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=pa(e),ma))?n:ha?ua(t):"Object"==(r=ua(t))&&da(t.callee)?"Arguments":r},ga=fa,ba=yt.String,va=function(e){if("Symbol"===ga(e))throw TypeError("Cannot convert a Symbol value to a string");return ba(e)},ya=Lt("".replace),wa=String(Error("zxcasd").stack),Ea=/\n\s*at [^:]*:[^\n]*/,Sa=Ea.test(wa),xa=function(e,t){var n,r,o,i,a,s=e.target,c=e.global,l=e.stat;if(n=c?zi:l?zi[s]||qi(s,{}):(zi[s]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(a=Wi(n,r))&&a.value:n[r],!Gi(c?r:s+(l?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;Hi(i,o)}(e.sham||o&&o.sham)&&Ui(i,"sham",!0),Vi(n,r,i,e)}},ka=sn,Ma=At,Oa=Br.f,Ca=Hn,Ra=function(e,t){if(Qi(t,e))return e;throw Ki("Incorrect invocation")},Ia=function(e,t,n){var r,o;return aa&&oa(r=t.constructor)&&r!==n&&ia(o=r.prototype)&&o!==n.prototype&&aa(e,o),e},Ta=function(e,t){return void 0===e?arguments.length<2?"":t:va(e)},Fa={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}},Da=function(e,t){if(Sa&&"string"==typeof e)for(;t--;)e=ya(e,Ea,"");return e},Aa="DOMException",Ba=ka("Error"),Na=ka(Aa),_a=function(){Ra(this,Pa);var e=arguments.length,t=Ta(e<1?void 0:arguments[0]),n=Ta(e<2?void 0:arguments[1],"Error"),r=new Na(t,n),o=Ba(t);return o.name=Aa,Oa(r,"stack",Ma(1,Da(o.stack,1))),Ia(r,this,_a),r},Pa=_a.prototype=Na.prototype,$a="stack"in Ba(Aa),La="stack"in new Na(1,2),ja=$a&&!La;xa({global:!0,forced:ja},{DOMException:ja?_a:Na});var za=ka(Aa),Wa=za.prototype;if(Wa.constructor!==za)for(var Ua in Oa(Wa,"constructor",Ma(1,za)),Fa)if(Ca(Fa,Ua)){var Va=Fa[Ua],qa=Va.s;Ca(za,qa)||Oa(za,qa,Ma(6,Va.c))}const Ha=`OS: ${et()?`iOS ${tt().getBrowserVersion()}(Desktop Mode on iOS Safari detected, estimating version from Safari)`:`${tt().getOSName()} ${tt().getOSVersion()}`}\nBrowser version: ${tt().getBrowserName()} ${tt().getBrowserVersion()} with ${tt().getEngineName()} engine\nPlatform: ${et()?" Tablet (Desktop Mode on iOS Safari detected)":tt().getPlatformType()}\nWeb SDK version: ${e.version.versionStr}`,Ga=10,Qa=ie("About");function Ka(e){const[r,o]=t.useState(""),[i,a]=t.useState("");return n((()=>{null!==e.connection&&(o(Ya(e.connection.getServerInfo())),fetch("third-party-licenses.txt").then((e=>{const t=`Status code: ${e.status}, Status Text: ${e.statusText}`;if(Qa.debug(`Received response. ${t}`),[...e.headers.entries()].forEach((e=>Qa.debug(`Header: ${e[0]} with value: ${e[1]}`))),!e.ok)throw new Error(t);return e.text()})).then((e=>a(e))).catch((e=>Qa.warn(`Failed to fetch resource. Error: ${e}`))))}),[e.connection]),t.createElement(m,{onDismiss:e.onDismiss,visible:e.visible,size:"large",header:"About Amazon DCV",modalRoot:window.document.body,disableContentPaddings:!0,footer:t.createElement(g,{gridDefinition:[{colspan:7},{colspan:5}]},t.createElement(p,null,"Copyright © 2017-2024, NICE s.r.l. or its affiliates. All rights reserved."),t.createElement(p,{float:"right"},t.createElement(b,{external:!0,externalIconAriaLabel:"Opens in a new tab",href:"EULA.txt"},"End User License Agreement")))},t.createElement(v,{tabs:[{label:"Client",id:"about-client",content:de(t.createElement(f,{rows:Ga,readOnly:!0,value:Ha}))},{label:"Server",id:"about-server",content:de(t.createElement(f,{rows:Ga,readOnly:!0,value:r}))},{label:"Third party notices",id:"third-party-notices",content:de(t.createElement(f,{rows:Ga,readOnly:!0,value:i}))}]}))}function Ya(e,t){let n="";return Object.keys(e).forEach((r=>{"version"===r?n+=`${le(r)}: ${e[r].major}.${e[r].minor}.${e[r].revision}\n`:ce(e[r])?n+=Ya(e[r],le(r)):n+=t?`${t}-${r}: ${e[r]}\n`:`${le(r)}: ${e[r]}\n`})),n}function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Za.apply(null,arguments)}Ka.propTypes={connection:c.object,visible:c.bool,onDismiss:c.func};var Ja=({styles:e={},...n})=>t.createElement("svg",Za({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M15 6h-5V1M1 6h5V1M1 10h5v5M15 10h-5v5M1 1l5 5M15 1l-5 5M6 10l-5 5M10 10l5 5"}));const Xa=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],es=ie("Fullscreen");function ts(e){return Boolean(e.fullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||e.msFullscreenElement)}function ns({setFullscreen:e,currentDocument:r}){const[o,i]=t.useState(!1),a=()=>{const t=ts(r);i(t),e(t)},s=()=>r.fullscreenEnabled||r.webkitFullscreenEnabled||r.mozFullScreenEnabled||r.msFullscreenEnabled;return n((()=>(s()&&Xa.forEach((e=>r.addEventListener(e,a))),()=>{s()&&Xa.forEach((e=>r.removeEventListener(e,a)))})),[r,e]),t.createElement("div",{title:"Full Screen"},t.createElement(u,H({},o?{iconSvg:t.createElement(Ja,null)}:{iconName:"expand"},{variant:"icon",onClick:()=>{ts(r)?(r.exitFullscreen?r.exitFullscreen():r.mozCancelFullScreen?r.mozCancelFullScreen():r.webkitExitFullscreen?r.webkitExitFullscreen():r.msExitFullscreen&&r.msExitFullscreen(),navigator?.keyboard?.unlock()):(()=>{const e=r.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen(),navigator.permissions.query({name:"keyboard-lock"}).then((e=>{"denied"!==e?.state?(es.info("granted"===e?.state?"Keyboard lock enabled":"Requesting permission to lock keyboard"),navigator?.keyboard?.lock().catch((()=>{}))):es.info("Keyboard lock permission denied")})).catch((()=>{es.debug("Keyboard-lock permission not supported by browser, defaulting to normal behaviour"),navigator?.keyboard?.lock()}))})()}})))}ns.propTypes={setFullscreen:c.func,currentDocument:c.object};var rs=r(ns);const os=ie("Display Layout");let is,as,ss,cs={},ls={};function ds(){return as}function us(e){return Ie.dynamicResolution&&ds()&&Ie.selectedResolution===Ee&&(e||is&&is.length>1)}function ms(e,t,n){let r,o;if(is&&is.length>0)1===is.length||n?(r=is[0].rect.width,o=is[0].rect.height):is.length>1&&!n&&(r=is[1].rect.width,o=is[1].rect.height);else{const e=t.document.getElementById("dcv-display");e?(r=e.getBoundingClientRect().width,o=e.getBoundingClientRect().height):(r=t.innerWidth,o=t.innerHeight)}us(n)?(cs[n]&&(clearTimeout(cs[n]),cs[n]=null),cs[n]=setTimeout((()=>{!function(e,t,n){let r=gs(t),o=fs(t);r=Math.min(r,Ie.maxDisplayWidth||r),r=Math.max(r,Ie.minDisplayWidth||r),o=Math.min(o,Ie.maxDisplayHeight||o),o=Math.max(o,Ie.minDisplayHeight||o);const i=()=>{const e=e=>Math.abs(ls[n].width-r)>e||Math.abs(ls[n].height-o)>e;return!ts(t.document)&&!t.fullScreen||function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(ls[n])||e(2)};i()?(ls[n]={width:r,height:o},Es(e,r,o,n),ot()&&nt()&&bs(t.document.getElementById("dcv-display-frame"),"hidden")):bs(t.document.getElementById("dcv-display-frame"),"hidden")}(e,t,n),cs[n]=null}),500)):ys(r,o,t,n)}function ps(e,t){return`${e}x${t}`}function hs(e){return e.split("x")}function fs(e){let t=0,n=e.document.getElementById("dcv-container"),r=e.document.getElementById("dcv-display-frame");return n&&r?(t=r.getBoundingClientRect().top-n.getBoundingClientRect().top,n.getBoundingClientRect().height-t):ue(e)}function gs(e){const t=e.document.getElementById("dcv-container");return t?t.getBoundingClientRect().width:e.innerWidth}function bs(e,t){e&&(e.style.overflow=t)}function vs(e){const t=e.document.getElementById("dcv-display"),n=e.document.getElementById("dcv-display-frame");t&&n&&((()=>{const r=fs(e),o=t.getBoundingClientRect().height,i=o?`${Math.max(0,(r-o)/2).toString()}px`:0;t.style.marginTop=i,n.style.height=`${r.toString()}px`})(),(()=>{const r=gs(e),o=t.getBoundingClientRect().width,i=o?`${Math.max(0,(r-o)/2).toString()}px`:0;t.style.marginLeft=i,n.style.width=`${r.toString()}px`})())}function ys(e,t,n,r){let o=1,i=1,a=1;const s=gs(n),c=fs(n);if(vs(n),bs(n.document.getElementById("dcv-display-frame"),Ie.scaleToFit?"hidden":"auto"),us(r)||(ls[r]={}),Ie.scaleToFit){if(i=s/e,a=c/t,o=Math.max(0,Math.floor(100*Math.min(1,i,a))/100),!o)return;os.info(`Requesting a display scaling factor of ${o}`),!function(e,t){const n=`scale(${e})`,r=t.getElementById("dcv-display"),o=t.getElementById("dcv-container");ss||(ss=function(){const e=window.CSS&&window.CSS.supports||window.supportsCSS;if(e&&e("( transform: scale(1) )"))return"transform";if(e&&e("( zoom: 0.8 )"))return"zoom";return"no-scale"}());if("transform"===ss)return r.style.transform=n,r.style.transformOrigin="0 0",o.style.overflow="hidden",!0;if("zoom"===ss)return r.style.zoom=e,o.style.overflow="hidden",!0;return o.style.overflow="auto",!1}(o,n.document)?os.info("CSS scaling or zoom unsupported!"):vs(n)}}function ws(e){is=e}function Es(e,t,n,r){let o,i,a=r?is[0].name:is[1].name,s=r?0:is[0].rect.width;return is&&is.length>1?(o={name:a,rect:{x:s,y:0,width:t,height:n},primary:r},i=r?[o,is[1]]:[is[0],o],ws(i),e.requestDisplayLayout(i)):e.requestResolution(t,n)}function Ss(e){const[r,o]=t.useState(Ie.macOptionToAlt),[i,a]=t.useState(Ie.macCommandToControl),s=t=>{t?(Ie.macOptionToAlt=r,Ie.macCommandToControl=i,Te(),e.connection.setKeyboardQuirks({macOptionToAlt:r,macCommandToControl:i,forceKeyboardCombinations:Ie.forceKeyboardCombinations})):(o(Ie.macOptionToAlt),a(Ie.macCommandToControl))};return n((()=>(Z.on("close-preferences",s),()=>{Z.off("close-preferences",s)})),[r,i]),t.createElement(h,{size:"xxl"},t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Option key setting"),t.createElement(y,{onChange:({detail:e})=>o(e.value),value:r,items:[{value:!0,label:"Use Option (⌥) as remote Alt key"},{value:!1,label:"Use Option (⌥) as local modifier"}]})),t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Command key setting"),t.createElement(y,{onChange:({detail:e})=>a(e.value),value:i,items:[{value:!0,label:"Use Command (⌘) as remote Control key"},{value:!1,label:"Use Command (⌘) as remote Meta key"}]})))}Ss.propTypes={connection:c.object};const xs={ERROR:{status:"error",color:"red",importance:3},WARNING:{status:"warning",color:"red",importance:2},SUCCESS:{status:"success",color:"green",importance:1},INFO:{status:"info",color:"blue",importance:1}};let ks=0,Ms=[];const Os=e=>({id:ks++,level:se(e.level)?xs.INFO:e.level,header:se(e.header)?"":e.header,description:se(e.description)?null:e.description,progress:se(e.progress)?null:e.progress,uploadedBytes:se(e.progress)?null:e.uploadedBytes,totalBytes:se(e.progress)?null:e.totalBytes,uploadedFiles:se(e.progress)?null:e.uploadedFiles,totalFiles:se(e.progress)?null:e.totalFiles,actions:se(e.actions)?{}:e.actions,timestamp:Date.now()});function Cs(e,t){let n,r=Os(e),o=-1;return se(t)||(o=Ms.findIndex((e=>e.id===t))),-1===o?n=[r].concat(Ms.map((e=>({...e})))):(n=Ms.map((e=>({...e}))),n[o]=r),Ms=n,Z.emit("notifications-update",Ms),r.id}function Rs(e){const t=Ms.map((e=>({...e}))).filter((t=>t.id!==e));Ms=t,Z.emit("notifications-update",Ms)}function Is(e,t,n,r,o,i){if(!se(t)){const a=Ms.findIndex((e=>e.id===t));if(-1!==a){const t=Ms.map((e=>({...e})));t[a].progress=e,t[a].uploadedBytes=n,t[a].totalBytes=r,t[a].uploadedFiles=o,t[a].totalFiles=i,Ms=t,Z.emit("notifications-update",Ms)}}}const Ts=ie("UI CameraSelect");let Fs=null,Ds=null;function As(e){const[r,i]=t.useState(),[a,s]=t.useState([]),[c,l]=t.useState(),d=o(!0),m=e=>{Cs({level:xs.ERROR,header:"Error getting devices.",description:e.message,actions:{dismissable:!0}},Ds)},f=e=>{const t=[];e.filter((e=>"videoinput"===e.kind)).forEach(((e,n)=>{t.push({label:e.label||`Camera ${n+1}`,value:e.deviceId})})),s(t)},g=()=>{e.connection.getConnectedDevices().then(f).catch(m)},b=()=>{navigator.permissions.query({name:"camera"}).then((t=>{Fs&&(Fs.onchange=null),Fs=t,r||(t.onchange=b,g()),i(t.state),"granted"===t.state&&me(e.webcamStatus)&&g()})).catch((e=>{e instanceof TypeError?Ts.info(e.message):Ts.warn(e.message)}))},v=t=>{t?c&&(e.setWebcamId(c),Ie.selectedWebcamId=c,Te()):l(Ie.selectedWebcamId)},y=()=>t.createElement(u,{iconAlign:"right",href:"https://docs.aws.amazon.com/dcv/latest/userguide/using-webcam.html",target:"_blank",iconName:"external"},"Read more");n((()=>{a.filter((t=>e.webcamId===t.value)).length?l(e.webcamId):a.length&&(l(a[0].value),e.setWebcamId(a[0].value))}),[e.webcamId,r,a]),n((()=>{e.webcamStatus&&(Ts.info(`Webcam enabled. Status: ${e.webcamStatus}`),d.current&&(b(),d.current=!1))}),[e.webcamStatus]),n((()=>(Z.on("close-preferences",v),Z.on("device-change",g),()=>{Z.off("close-preferences",v),Z.off("device-change",g)})),[e.connection,e.setWebcamId,c]);const[S,x,k,M]=(()=>{let n="",o=null,i="info",a=!0;if("busy"===e.webcamStatus)n="Camera not available. Another user is already sharing a camera within the session.",o=y(),i="warning";else switch(r){case"prompt":n="Camera not available. Grant camera permission to use it.",o=t.createElement(u,{onClick:()=>navigator.mediaDevices.getUserMedia({video:!0})},"Allow detection"),i="info";break;case"denied":n="Camera not available. Grant camera permission to use it.",o=y(),i="warning";break;case"granted":"streaming"===e.webcamStatus?(n="The selected camera cannot be changed while the streaming is active.",o=y(),i="warning"):(n="Camera available. Check the browser settings to change this site's camera permission.",o=y(),i="info",a=!1)}return[n,o,i,a]})();return t.createElement(h,{size:"l"},t.createElement(w,{action:x,type:k},S),t.createElement("div",null,t.createElement(p,null,"Camera"),t.createElement(p,{color:"text-body-secondary",fontSize:"body-s",margin:{bottom:"s"}},"Select which camera to activate."),t.createElement("div",{style:{width:"70%"}},t.createElement(E,{selectedOption:(e=>{const t=a.filter((t=>e===t.value));return t.length?t[0]:null})(c),onChange:({detail:e})=>l(e.selectedOption.value),options:a,selectedAriaLabel:"Selected",disabled:M}))))}As.propTypes={connection:c.object,webcamStatus:c.string,webcamId:c.string,setWebcamId:c.func};const Bs=ie("Preferences");function Ns(r){const[o,i]=t.useState("general"),[a,s]=t.useState(Ie.selectedResolution),[c,l]=t.useState(Ie.metricsEnabled),[d,f]=t.useState(!1),[g,b]=t.useState(!1),[w,E]=t.useState(Ie.enableHighPixelDensity),[k,M]=t.useState(Ie.displayQuality),[O,C]=t.useState(Ie.appearanceMode),[R,I]=t.useState(Ie.toolbarBehavior),[T,F]=t.useState(260),[D,A]=t.useState(0),[B,N]=t.useState(Ie.timezoneRedirectionEnabled),_=e=>{Cs({level:xs.WARNING,header:"Timezone Redirection config error.",description:t.createElement("div",null,"Failed to ",B?"enable":"disable",".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})},P=()=>{Z.emit("close-preferences",!1),s(Ie.selectedResolution),E(Ie.enableHighPixelDensity),M(Ie.displayQuality),C(Ie.appearanceMode),I(Ie.toolbarBehavior),l(Ie.metricsEnabled),b(Ie.highColorAccuracy),N(Ie.timezoneRedirectionEnabled),r.onDismiss()};return n((()=>{r.connection&&Pe("high-color-accuracy",(e=>{f(e.available),b(e.enabled),F(e.available?350:300),e.available&&(Ie.highColorAccuracy=e.enabled,Te())}))}),[r.connection]),n((()=>{A(r.timezoneRedirectionSetting),r.connection&&r.timezoneRedirectionSetting===e.TimezoneRedirectionSetting.CLIENT_DECIDES&&r.connection.enableTimezoneRedirection(B).catch(_)}),[r.connection,r.timezoneRedirectionSetting]),t.createElement(m,{onDismiss:P,visible:r.visible,size:"large",header:"Preferences",modalRoot:window.document.body,disableContentPaddings:!0,footer:t.createElement(p,{float:"right"},t.createElement(h,{direction:"horizontal",size:"xs"},t.createElement(u,{variant:"link",onClick:P},"Cancel"),t.createElement(u,{variant:"primary",onClick:()=>{Z.emit("close-preferences",!0),(()=>{let e;k!==Ie.displayQuality&&(e=k===ye.label?ye:we,r.connection.setDisplayQuality(e.minQuality,e.maxQuality),Bs.info(`Switching to ${k} display mode`),Ie.displayQuality=k)})(),O!==Ie.appearanceMode&&(Ie.appearanceMode=O,r.submitAppearanceModePreferences(O)),R!==Ie.toolbarBehavior&&(Ie.toolbarBehavior=R,r.submitToolbarBehaviorPreferences(R)),c!==Ie.metricsEnabled&&(Ie.metricsEnabled=c,r.submitMetricsPreferences(c)),(()=>{if(!d)return;const e=g?"enable":"disable";r.connection.requestDisplayConfig(g).catch((n=>{Cs({level:xs.WARNING,header:"Display config error.",description:t.createElement("div",null,"Failed to ",e," high color accuracy.",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}})}))})(),a!==Ie.selectedResolution&&(Ie.selectedResolution=a===Ee?Ee:Se,r.submitResolutionPreferences(a),s(Ie.selectedResolution)),ot()&&w!==Ie.enableHighPixelDensity&&(Ie.enableHighPixelDensity=w,r.connection.enableHighPixelDensity(w)),B!==Ie.timezoneRedirectionEnabled&&(Ie.timezoneRedirectionEnabled=B,D===e.TimezoneRedirectionSetting.CLIENT_DECIDES&&r.connection.enableTimezoneRedirection(B).catch(_)),Te(),r.onDismiss()}},"Save")))},t.createElement("div",{style:{height:T}},t.createElement(v,{activeTabId:o,onChange:({detail:e})=>i(e.activeTabId),tabs:[{label:"General",id:"general",content:de(t.createElement(S,{columns:2},t.createElement("div",null,t.createElement(h,{size:"xxl"},t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Appearance"),t.createElement(y,{onChange:({detail:e})=>C(e.value),value:O,items:[...Me()?[{value:ve,label:ve+(r.systemDefaultAppearanceMode?` (${le(r.systemDefaultAppearanceMode)})`:"")}]:[],{value:ge,label:ge},{value:be,label:be}]})),D===e.TimezoneRedirectionSetting.CLIENT_DECIDES?t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Time Zone Redirection"),t.createElement(x,{onChange:({detail:e})=>N(e.checked),checked:B},B?"Enabled":"Disabled")):null)),t.createElement("div",null,t.createElement(p,{margin:{bottom:"s"}},"Toolbar behavior"),t.createElement(y,{onChange:({detail:e})=>I(e.value),value:R,items:[{value:pe.label,label:pe.label,description:pe.description},{value:he.label,label:he.label,description:he.description},{value:fe.label,label:fe.label,description:fe.description}]}))))},{label:"Display",id:"display",content:de(t.createElement(S,{columns:2},t.createElement(h,{size:"xxl"},t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Streaming mode"),t.createElement(y,{onChange:({detail:e})=>M(e.value),value:k,items:[{value:ye.label,label:ye.label,description:ye.description},{value:we.label,label:we.label,description:we.description}]})),d&&t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"High color accuracy (YUV 4:4:4)"),t.createElement(x,{onChange:({detail:e})=>b(e.checked),checked:g,description:"Streaming performance could be affected."},g?"Enabled":"Disabled")),t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Streaming metrics in the toolbar"),t.createElement(x,{onChange:({detail:e})=>l(e.checked),checked:c},c?"Enabled":"Disabled"))),t.createElement(h,{size:"xxl"},ot()&&t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"High pixel density"),t.createElement(x,{onChange:({detail:e})=>E(e.checked),checked:w},w?"Enabled":"Disabled")),ds()?t.createElement(p,null,t.createElement(p,{margin:{bottom:"s"}},"Display resolution"),t.createElement(y,{onChange:({detail:e})=>s(e.value),value:a,items:[{value:Ee,label:"Adapt automatically"},{value:Se,label:`${r.currentResolution} (Current)`},...($=r.currentResolution,xe.filter((e=>{let t=!0;if(Ie.minDisplayWidth&&(t=e.width>=Ie.minDisplayWidth),t&&Ie.maxDisplayWidth&&(t=e.width<=Ie.maxDisplayWidth),t&&Ie.minDisplayHeight&&(t=e.height>=Ie.minDisplayHeight),t&&Ie.maxDisplayWidth&&(t=e.height<=Ie.maxDisplayHeight),t){const n=hs($);e.width.toString()===n[0]&&e.height.toString()===n[1]&&(t=!1)}return t})).map((e=>({value:ps(e.width,e.height),label:ps(e.width,e.height)}))))]})):null)))},...ot()?[{label:"Keyboard",id:"keyboard",content:de(t.createElement(Ss,{connection:r.connection}))}]:[],...r.webcamStatus&&"not-available"!==r.webcamStatus?[{label:"Camera",id:"camera",content:de(t.createElement(As,{connection:r.connection,webcamStatus:r.webcamStatus,webcamId:r.webcamId,setWebcamId:r.setWebcamId}))}]:[]]})));var $}Ns.propTypes={connection:c.object,visible:c.bool,onDismiss:c.func,submitResolutionPreferences:c.func,currentResolution:c.string,submitMetricsPreferences:c.func,submitAppearanceModePreferences:c.func,submitToolbarBehaviorPreferences:c.func,webcamStatus:c.string,webcamId:c.string,setWebcamId:c.func,systemDefaultAppearanceMode:c.oneOf([P.Light,P.Dark]),timezoneRedirectionSetting:c.number};const _s=ie("DropdownMenu");let Ps;function $s({connection:e,relativeMouseModeEnabled:r,sasEnabled:o,focusDisplay:i,screenshotEnabled:a,currentResolution:s,submitResolutionPreferences:c,submitMetricsPreferences:l,submitAppearanceModePreferences:d,submitToolbarBehaviorPreferences:u,webcamStatus:m,webcamId:p,setWebcamId:h,systemDefaultAppearanceMode:f,timezoneRedirectionSetting:g}){const[b,v]=t.useState(""),[y,w]=t.useState(!1),[E,S]=t.useState(!1),[x,M]=t.useState(0),[O,C]=t.useState(!1),R=n=>{switch(n){case"relativeMouseMode":navigator.permissions.query({name:"pointer-lock"}).then((t=>{"denied"!==t?.state?(_s.info("granted"===t?.state?"Mouse lock enabled: enabling relative mouse":"Requesting permission to lock mouse, to enable relative mouse"),e.enterRelativeMouseMode()):(_s.info("Mouse lock permission denied, couldn't enable relative mouse"),Cs({level:xs.WARNING,header:"Permissions to mouse lock was not granted.",description:"Enable mouse lock permissions and try again.",actions:{dismissable:!0}}))})).catch((()=>{_s.debug("Pointer-lock permission not supported by browser, defaulting to normal behaviour"),e.enterRelativeMouseMode()}));break;case"SAS":!function(e){e.sendKeyboardShortcut([{key:"Control",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT},{key:"Alt",location:KeyboardEvent.DOM_KEY_LOCATION_LEFT},{key:"Delete",location:KeyboardEvent.DOM_KEY_LOCATION_STANDARD}])}(e),C(!0);break;case"preferences":S(!0);break;case"screenshot":!function(e){const n=e=>{_s.error(`Failed to capture screenshot: ${e.message}`),Cs({level:xs.ERROR,header:"Screenshot error",description:t.createElement("div",null,"Failed to capture screenshot.",t.createElement("br",null),"Error: ",e.message),actions:{dismissable:!0}})};Ps=setTimeout((()=>{_s.warn("No response to the screenshot request"),n({message:"Timeout"}),Ps=null}),2e4),e.getScreenshot().catch((e=>{Ps&&clearTimeout(Ps),n(e)}))}(e);break;case"aboutDCV":w(!0);break;case"disconnection":e.disconnect()}};return n((()=>{null!==e&&v(e.getServerInfo().hostname)}),[e]),n((()=>(Z.on("screenshot",js),()=>{Z.off("screenshot",js)})),[]),n((()=>{M(g)}),[g]),n((()=>{O&&(i(),C(!1))}),[O]),t.createElement("div",{title:"More"},t.createElement(k,{onItemClick:({detail:e})=>R(e.id),items:[...r?[{text:"Use relative mouse [Ctrl + Shift + F8]",id:"relativeMouseMode"}]:[],...o?[{text:"Send Ctrl + Alt + Del",id:"SAS"}]:[],...a?[{text:"Save Screenshot",id:"screenshot"}]:[],{text:"Preferences",id:"preferences"},{text:"About Amazon DCV",id:"aboutDCV"},{text:"Disconnect",id:"disconnection"}]},b),t.createElement(Ka,{connection:e,visible:y,onDismiss:()=>{w(!1)}}),t.createElement(Ns,{connection:e,currentResolution:s,submitResolutionPreferences:c,visible:E,onDismiss:()=>{S(!1)},submitMetricsPreferences:l,submitAppearanceModePreferences:d,submitToolbarBehaviorPreferences:u,webcamStatus:m,webcamId:p,setWebcamId:h,systemDefaultAppearanceMode:f,timezoneRedirectionSetting:x}))}function Ls(e){return btoa(function(e){let t,n=32768,r=[];for(t=0;t<e.length;t+=n)r.push(String.fromCharCode.apply(null,e.subarray(t,t+n)));return r.join("")}(new Uint8Array(e)))}function js(e){Ps&&clearTimeout(Ps),null!==e?(_s.info("Retrieved screenshot"),Cs({level:xs.INFO,header:"Screenshot captured.",description:"Screenshot ready to be downloaded.",actions:{accept:{text:"Download",callback:()=>function(e){const t=document.createElement("a");t.href=`data: image/png;base64,${Ls(e)}`,"download"in t&&(t.download="connection.png"),t.target="_blank",t.click()}(e),remove:!0},decline:{text:"Decline",remove:!0}}})):(_s.warn("Failed to capture screenshot"),Cs({level:xs.ERROR,header:"Screenshot error.",description:"Failed to capture screenshot.",actions:{dismissable:!0}}))}$s.propTypes={connection:c.object,relativeMouseModeEnabled:c.bool,sasEnabled:c.bool,focusDisplay:c.func,screenshotEnabled:c.bool,currentResolution:c.string,submitResolutionPreferences:c.func,submitMetricsPreferences:c.func,submitAppearanceModePreferences:c.func,submitToolbarBehaviorPreferences:c.func,webcamStatus:c.string,webcamId:c.string,setWebcamId:c.func,systemDefaultAppearanceMode:c.oneOf([P.Light,P.Dark]),timezoneRedirectionSetting:c.number};var zs=r($s);function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ws.apply(null,arguments)}var Us=({styles:e={},...n})=>t.createElement("svg",Ws({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("rect",{x:"4",y:"1",width:"4",height:"8",rx:"2"}),t.createElement("path",{d:"M1 6v1a5 5 0 008 4M6 12v3M1 15h10M15.12 5.75l-4.5 4.5M15.12 10.25l-4.5-4.5"}));const Vs=ie("Microphone");function qs({connection:e}){const[r,a]=i(Ie.microphone),s=o(!1),c=t=>{s.current=t,a(t),Ie.microphone=t,Te(),e.setMicrophone(t).catch((e=>{const n=`Failed to ${t?"enable":"disable"} microphone.`;Vs.warn(`${n} Disabling microphone. Error (code: ${e.code}): ${e.message}`),Ie.microphone=t,Te(),Cs({level:xs.ERROR,header:"Microphone error.",description:n,actions:{dismissable:!0}})})).finally((()=>{s.current=!1,Vs.info("[Audio] Setting microphone to "+(Ie.microphone?"enabled":"disabled"))}))};return n((()=>{c(Ie.microphone)}),[e]),t.createElement("div",{title:"Microphone"},t.createElement(u,H({},r?{iconName:"microphone"}:{iconSvg:t.createElement(Us,null)},{variant:"icon",onClick:()=>{s.current||c(!Ie.microphone)}})))}qs.propTypes={connection:c.object};var Hs=r(qs);function Gs(){return Gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gs.apply(null,arguments)}var Qs=({styles:e={},...n})=>t.createElement("svg",Gs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM15.01 5.75l-4.5 4.5M15.01 10.25l-4.5-4.5"}));function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ks.apply(null,arguments)}var Ys=({styles:e={},...n})=>t.createElement("svg",Ks({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM11 5v6"}));function Zs(){return Zs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zs.apply(null,arguments)}var Js=({styles:e={},...n})=>t.createElement("svg",Zs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M7 15V1L1 6v4l6 5zM15 3v10M11 5v6"}));const Xs=ie("Audio");function ec({connection:e}){const[n,r]=t.useState(Ie.volume),[o,i]=t.useState(Ie.volume),a=t=>{r(t),Ie.volume=t,Te(),e.setVolume(t),Xs.debug(`Client volume level set to ${t}`)};return t.createElement(l,{position:"bottom",size:"large",triggerType:"custom",header:"Volume",dismissButton:!1,content:t.createElement(h,{direction:"horizontal",size:"s"},t.createElement(u,{iconSvg:tc(n),variant:"icon",onClick:()=>{a(n?0:o)}}),t.createElement("input",{type:"range",style:{verticalAlign:"middle",width:"150px",height:"100%"},orient:"horizontal",min:"0",max:"100",step:"1",value:o,onChange:e=>{return t=Number(e.target.value),i(t),void a(t);var t}}),t.createElement("div",{style:{display:"flex",width:"3ch",textAlign:"center",alignItems:"center",justifyContent:"center",height:"100%"}},t.createElement("output",null,o)))},t.createElement("div",{title:"Audio"},t.createElement(u,{iconSvg:tc(n),variant:"icon"})))}function tc(e){return e<=0?t.createElement(Qs,null):e<=50?t.createElement(Ys,null):t.createElement(Js,null)}ec.propTypes={connection:c.object};var nc=r(ec);function rc(e){return e<1e3?`${e.toFixed(1)} bps`:e<1e6?`${(e/1e3).toFixed(1)} kbps`:`${(e/1e6).toFixed(1)} Mbps`}const oc=({label:e,color:n,children:r})=>t.createElement("div",null,t.createElement(p,{margin:{bottom:"xxxs"}},t.createElement(h,{direction:"horizontal",size:"xxs"},n&&t.createElement(ic,{color:n}),t.createElement(p,{color:"text-label"},e))),t.createElement("div",null,r));oc.propTypes={label:c.string,color:c.string,children:c.node};const ic=({color:e})=>t.createElement("svg",{width:"12",height:"12"},t.createElement("rect",{width:"12",height:"12",style:{fill:e,strokeWidth:"1",stroke:"rgb(0,0,0)"}}));ic.propTypes={color:c.string};let ac=null,sc=[];function cc({connection:e}){const[r,i]=t.useState(0),[s,c]=t.useState(0),[l,d]=t.useState(0),[f,v]=t.useState(""),[y,w]=t.useState(""),[E,S]=t.useState([]),[x,k]=t.useState(!1),C=o();C.current=x;const R=()=>{const t=e.getStats();let n,r,o=0;if(sc.length>60){for(n=[],r=0;r<sc.length-1;r++)n.push(sc[r]);sc=n}for(0===sc.length?sc.push({x:0,y:t.traffic}):(sc.forEach((e=>{e.x++})),sc.unshift({x:0,y:t.traffic})),r=0;r<sc.length;r++)o+=sc[r].y;o/=sc.length,C.current&&(S(sc),i(t.traffic),c(o),d(t.peakTraffic)),v(t.latency>999?"> 1 s":`${Math.round(t.latency)} ms`),w(`${t.fps} fps`),ac=setTimeout(R,1e3)},I=a((()=>{k(!0)}),[]);n((()=>(null!==e&&R(),()=>{clearTimeout(ac)})),[e]);const T=()=>t.createElement("div",{title:"Metrics"},t.createElement(u,{variant:"link",onClick:I},t.createElement(h,{direction:"horizontal",size:"m"},t.createElement(p,{fontWeight:"bold",color:"inherit"},y),t.createElement(p,{fontWeight:"bold",color:"inherit"},f))));return t.createElement("div",null,t.createElement(T,null),x&&t.createElement(m,{onDismiss:()=>{k(!1)},visible:x,size:"medium",header:"Streaming metrics",footer:t.createElement(g,{gridDefinition:[{colspan:4},{colspan:4},{colspan:4}]},t.createElement(oc,{label:"Current usage",color:j},rc(r)),t.createElement(oc,{label:"Average usage",color:z},rc(s)),t.createElement(oc,{label:"Peak usage",color:W},rc(l)))},t.createElement(h,{size:"xl"},t.createElement(g,{gridDefinition:[{colspan:6},{colspan:6}]},t.createElement(oc,{label:"Framerate"},y),t.createElement(oc,{label:"Network latency"},f)),t.createElement(M,{variant:"h3",actions:t.createElement(b,{external:!0,externalIconAriaLabel:"Opens in a new tab",href:"https://docs.aws.amazon.com/dcv/latest/userguide/using-streaming.html#using-streaming-metrics"},"Learn more")},"Download bandwidth"),t.createElement(O,{series:[{title:"Current usage",type:"line",data:E,color:j,valueFormatter:rc},{title:"Average usage",type:"threshold",y:s,color:z,valueFormatter:rc},...E.some((e=>e.y>=.8*l))?[{title:"Peak usage",type:"threshold",y:l,color:W,valueFormatter:rc}]:[]],i18nStrings:{xTickFormatter:e=>`${e} s`,yTickFormatter:rc},xDomain:[60,0],hideFilter:!0,hideLegend:!0,ariaLabel:"Single data series line chart",height:200,empty:t.createElement(p,{textAlign:"center",color:"inherit"},t.createElement("b",null,"No data available"),t.createElement(p,{variant:"p",color:"inherit"},"There is no data available"))}))))}cc.propTypes={connection:c.object};var lc=r(cc);function dc(){return dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dc.apply(null,arguments)}var uc=({styles:e={},...n})=>t.createElement("svg",dc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("path",{d:"M10.25 4.25l-4.5 4.5M10.25 8.75l-4.5-4.5"}));function mc(){return mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mc.apply(null,arguments)}var pc=({styles:e={},...n})=>t.createElement("svg",mc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("path",{d:"M5 6.5h6"}));function hc(){return hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hc.apply(null,arguments)}var fc=({styles:e={},...n})=>t.createElement("svg",hc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M8 12v3M3 15h10"}),t.createElement("circle",{cx:"8",cy:"6.56",r:"5.38"}),t.createElement("circle",{cx:"8",cy:"6.5",r:"2"}));const gc=ie("Webcam");function bc({connection:e,status:r,selectedWebcam:i,setSelectedWebcam:a}){const s=o(!1),c=o(!1),l=t=>{Ie.webcam=t,c.current?gc.debug(`Cannot set camera to ${t?"enabled":"disabled"} as a request is already in progress`):(c.current=!0,gc.info("Setting camera to "+(t?"enabled":"disabled")),e.setWebcam(t,i).then((e=>{t&&a(e)})).catch((e=>{const n=`Failed to ${t?"enable":"disable"} camera.`;gc.warn(`${n} Disabling camera. Error (code: ${e.code}): ${e.message}`),Cs({level:xs.ERROR,header:"Camera error.",description:n,actions:{dismissable:!0}})})).finally((()=>{c.current=!1})))},d=()=>{l(!Ie.webcam)};return n((()=>{"attached"===r&&(d(),s.current=!0)}),[i]),n((()=>{"available"===r&&s.current&&(d(),s.current=!1)}),[r]),n((()=>{l(Ie.webcam)}),[e]),t.createElement("div",{title:"Camera"},t.createElement(u,{iconSvg:vc(r),variant:"icon",onClick:d}))}function vc(e){switch(e){case"available":return t.createElement(uc,null);case"attached":return t.createElement(pc,null);case"streaming":return t.createElement(fc,null);default:throw new Error(`Illegal camera serviceStatus: ${e}`)}}bc.propTypes={connection:c.object,status:c.string,selectedWebcam:c.string,setSelectedWebcam:c.func};var yc=r(bc);function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wc.apply(null,arguments)}var Ec=({styles:e={},...n})=>t.createElement("svg",wc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M14 6.5l-3-3-3 3M11 4v10M8 9.5l-3 3-3-3M5 2v10"}));const Sc=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}),xc={text:"Storage",href:null},kc=1024,Mc=2,Oc=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],Cc=ie("Filestorage");let Rc,Ic=!1;function Tc({connection:e,downloadEnabled:r,uploadEnabled:i}){const[s,c]=t.useState(!1),l=o(!1),[d,f]=t.useState(!0),[g,v]=t.useState(!1),[y,w]=t.useState([]),[E,S]=t.useState([xc]),[x,M]=t.useState(1),[O,D]=t.useState(xc.href),A=o(xc.href),[B,N]=t.useState([]),[_,P]=t.useState(""),[$,L]=t.useState(""),[j,z]=t.useState(!1),[W,U]=t.useState(!1),[V,q]=t.useState(!1),H=o(null),G=o(null),Q=o(null),K=()=>Math.max(5,Math.floor((window.innerHeight-320-86)/42)),Y=()=>B.slice((x-1)*K(),x*K()),J=(e,n)=>t.createElement("div",{style:{display:"flex",alignItems:"center",height:"100%"}},t.createElement(T,{name:e}),n&&t.createElement("span",{style:{marginLeft:"5px"}},n)),X=e=>{let n,r=e&&"/"!==e&&"Storage"!==e?e:"",o=[];Cc.debug(`Changing to directory ${r}`),n=Rc.list(r),n.on("error",(e=>{1===e.code||2===e.code?Cc.info(`Aborted listing of ${r} folder`):(Cc.warn(`Failed to list ${r} folder (${e.message})`),Cs({level:xs.ERROR,header:"File storage error.",description:t.createElement("div",null,"Failed to list files in ",r," folder.",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}}),X())})).on("success",(()=>{Cc.debug("List files succeeded"),N(o),e!==O&&w([]),(e=>{let t=e.split("/"),n=[xc],r="";t.filter((e=>""!==e)).forEach((e=>{r+=`/${e}`,n.push({text:e,path:r,href:null})})),S(n),D(e),A.current=e,M(1)})(r)})).on("newItems",(e=>{Cc.debug(`New items ${e.length}`),Cc.debug(`update list folders ${O}`),o.push(...e)})).run()},ee=()=>{Ic?X(O):X()},te=()=>{c(!0),e.getFileExplorer().then((t=>{Rc=t,ee(),e.setUploadBandwidth(102400)})).catch((()=>{f(!1)}))},ne=()=>{l.current=!1,c(!1),e.setUploadBandwidth(10240),Ic=!1,q(!1)},re=(e,n)=>{let r,o,i=n||""===n?n:O;o=Cs({level:xs.INFO,header:"Upload in progress.",description:`File ${e.name} is uploading to Storage ${O}`,progress:0,actions:{decline:{text:"Stop uploading",callback:()=>r.cancel(),remove:!0}}}),r=Rc.storeFile(e,i),r.on("error",(n=>{1!==n.code&&Cs({level:xs.ERROR,header:"Upload error.",description:t.createElement("div",null,"Failed to upload ",e.name," to Storage",i,".",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}},o)})).on("progress",((e,t)=>{Is(Math.floor(100*e/t),o)})).on("success",(()=>{Cs({level:xs.SUCCESS,header:"File uploaded.",description:`File ${e.name} successfully uploaded to Storage${O}`,actions:{dismissable:!0}},o),Ic=!0,ee()})).run()},oe=e=>{const t=e.target.files;t&&t.length>0?(Cc.debug("A file to upload has been selected."),re(t[0])):Cc.debug("No file to upload has been selected.")},ie=e=>{Rc.retrieveFile(e).on("error",(n=>{Cs({level:xs.ERROR,header:"Download error.",description:t.createElement("div",null,"Impossible to download file ",e,".",t.createElement("br",null),"Error: ",n.message," (code: ",n.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Cs({level:xs.SUCCESS,header:"File ready for download.",description:`File ${e} ready to be downloaded to your device.`,actions:{dismissable:!0}})})).run()},ae=()=>{_.length>0&&_!==$&&((()=>{let e,n="folder"===y[0].type,r=y[0].displayName,o=`${O}/${r}`,i=`${O}/${_}`;e=n?Rc.renameDirectory(o,i):Rc.renameFile(o,i),e.on("error",(e=>{Cs({level:xs.ERROR,header:"Rename error.",description:t.createElement("div",null,"Failed to rename ",(n?"folder ":"file ")+r," to ",_,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Cc.debug("Rename succeeded."),Cs({level:xs.SUCCESS,header:(n?"Folder":"File")+" renamed.",description:`${n?"Folder":"File"} successfully renamed from ${r} to ${_}.`,actions:{dismissable:!0}}),Ic=!0,ee()})).run()})(),w([])),U(!1),P("")},se=()=>{const e=B.map((e=>({...e})));e.shift(),N(e)},ce=()=>{var e;_.length>0?Rc.createDirectory(e||`${O}/${_}`).on("error",(e=>{se(),Cs({level:xs.ERROR,header:"Folder creation error.",description:t.createElement("div",null,"Failed to create folder ",_,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Cc.debug("Mkdir succeeded"),Cs({level:xs.SUCCESS,header:"Folder created.",description:`Folder ${_} successfully created.`,actions:{dismissable:!0}}),Ic=!0,ee()})).run():se(),z(!1),P("")},le=e=>{for(const t of e)if("file"!==t.kind)return!1;return!0},de=e=>{Ic=!0,!nt()&&!s&&i&&le(e.dataTransfer.items)&&(l.current=!0,te())},ue=a((e=>{e.stopPropagation(),!e.relatedTarget&&l.current&&s&&ne()})),me=e=>{switch(e){case"download":ie(`${O}/${y[0].displayName}`);break;case"open":X(`${O}/${y[0].displayName}`);break;case"rename":L(y[0].displayName),P(y[0].displayName),U(!0);break;case"delete":Rc.deleteFile(`${O}/${y[0].displayName}`).on("error",(e=>{Cs({level:xs.ERROR,header:"Deletion error.",description:t.createElement("div",null,"Failed to delete file ",y[0].displayName,".",t.createElement("br",null),"Error: ",e.message," (code: ",e.code,")"),actions:{dismissable:!0}})})).on("success",(()=>{Cc.debug("Remove succeeded"),Cs({level:xs.SUCCESS,header:"File deleted.",description:`File ${y[0].displayName} successfully deleted.`,actions:{dismissable:!0}}),Ic=!0,ee()})).run();break;default:Cc.warn("Invalid dropdown action selected")}},pe=e=>t.createElement(u,{onClick:()=>e.current.click()},t.createElement("input",{style:{display:"none"},type:"file",ref:e,onChange:oe,onClick:e=>{e.target.value=""}}),"Upload file"),he=t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},t.createElement(h,{direction:"horizontal",size:"s"},t.createElement(k,{disabled:!y.length,onItemClick:({detail:e})=>me(e.id),items:[...r?[{text:"Download",id:"download",disabled:y.length&&"file"!==y[0].type}]:[],{text:"Rename",id:"rename",disabled:y.length&&!Y().filter((e=>e.displayName===y[0].displayName)).length}]},"Actions"),i&&pe(H),t.createElement(u,{onClick:()=>{N([{displayName:null,type:"folder"}].concat(B.map((e=>({...e}))))),w([]),z(!0),M(1)}},"Create folder")),t.createElement(C,{currentPageIndex:x,onChange:({detail:e})=>M(e.currentPageIndex),pagesCount:Math.ceil(B.length/K()),ariaLabels:{nextPageLabel:"Next page",previousPageLabel:"Previous page",pageLabel:e=>`Page ${e}`}})),fe=[{id:"name",header:"Name",cell:function(e){return J(e.type,(e=>{const n=(e,n)=>t.createElement(F,{ref:Q,onChange:({detail:e})=>P(e.value),onBlur:e,onKeyUp:({detail:t})=>{13===t.keyCode&&e()},value:_,placeholder:n,disableBrowserAutocorrect:!0,inputMode:"text"});return W&&e.displayName===y[0].displayName?n(ae,e.displayName):j&&null===e.displayName?n(ce,"New folder"):"file"===e.type?r?t.createElement(b,{ariaLabel:"Download",onFollow:()=>ie(`${O}/${e.displayName}`)},e.displayName):e.displayName:t.createElement(b,{ariaLabel:"Open",onFollow:g?()=>{}:()=>{X(`${O}/${e.displayName}`)}},e.displayName)})(e))},minWidth:380},{id:"lastModified",header:"Last modified",cell:function(e){return t.createElement(p,{variant:"p"},e.displayName&&e.lastModified?Sc.format(new Date(e.lastModified)):"-")},minWidth:180},{id:"size",header:"Size",cell:function(e){return t.createElement(p,{variant:"p"},"file"===e.type?Fc(e.size):"-")},minWidth:140}],ge=e=>{r&&(Cc.debug("Asking to download resource"),e.accept())};return n((()=>()=>{Ic=!1,Rc=null}),[]),n((()=>{(W||j)&&(Q.current.focus(),W&&Q.current.select())}),[W,j]),n((()=>(Z.on("file-download",ge),()=>{Z.off("file-download",ge)})),[r]),n((()=>(window.addEventListener("dragenter",de),window.addEventListener("dragleave",ue),()=>{window.removeEventListener("dragenter",de),window.removeEventListener("dragleave",ue)}))),t.createElement("div",null,t.createElement("div",{title:"Filestorage"},t.createElement(u,{variant:"icon",iconSvg:t.createElement(Ec,null),onClick:te})),t.createElement(m,{onDismiss:ne,visible:s,header:"File storage",size:"large",modalRoot:window.document.body},d?t.createElement("div",{onDragEnter:e=>q(!nt()&&le(e.dataTransfer.items))},t.createElement(p,{margin:{bottom:"xs"},padding:{bottom:"xs"}},t.createElement(h,{size:"xxs"},t.createElement(h,{direction:"horizontal",size:"s"},J("folder-open",""),t.createElement(R,{items:E,onClick:g?()=>{}:({detail:e})=>X(e.item.path)})),t.createElement("div",{style:{height:42*K()+86,position:"relative"}},t.createElement(I,{resizableColumns:!0,loadingText:"Loading resources",selectionType:"single",columnDefinitions:fe,items:Y(),selectedItems:y,onSelectionChange:({detail:e})=>w(e.selectedItems),header:he,empty:t.createElement(p,{textAlign:"center",color:"inherit",variant:"h5",margin:"m"},i&&!nt()?t.createElement(t.Fragment,null,t.createElement("p",null,"Drag and drop a file to upload"),t.createElement("p",null," Or "),pe(G)):t.createElement("p",null,"Folder ",E[E.length-1].text," is empty"))}),V&&i&&t.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",position:"absolute",alignItems:"center",bottom:"0px",width:"100%",height:42*K(),opacity:"0.8",outline:"2px",border:"2px dashed gray",backgroundColor:"white"},onDrop:e=>{e.preventDefault(),q(!1),((e,n)=>{if(!e[0])return void Cc.debug("Dropped file is null");const r=e[0].webkitGetAsEntry()||e[0].getAsEntry();if(r)if(r.isFile&&1===e.length)r.file((e=>{e.name.startsWith(".")||re(e,n)}),(()=>Cc.debug(`File not retrieved: ${r.name}`)));else{v(!0);const r=Rc.uploadFiles(e,n),o=Cs({level:xs.INFO,header:"Upload of dropped files in progress.",description:`Dropped files are uploading to Storage${n}`,progress:0,actions:{decline:{text:"Stop uploading",callback:()=>{r.cancel(),v(!1)},remove:!0}}});let i=0;r.on("error",(e=>{1!==e.code&&(Cs({level:xs.ERROR,header:"Upload dropped files error.",description:t.createElement("div",null,"Failed to upload dropped files",t.createElement("br",null),"Error: ",e.message," ",e.code?`(code: ${e.code})`:""),actions:{dismissable:!0}},o),v(!1))})).on("progress",((e,t,n,r,a,s,{destinationFolder:c,isDirectory:l})=>{Is(Math.floor(e/t*100),o,e,t,n,r),A.current===c&&(l||n>i)&&X(c),i=n})).on("success",(()=>{Cs({level:xs.SUCCESS,header:"Dropped files uploaded.",description:`Dropped files successfully uploaded to Storage${n}`,actions:{dismissable:!0}},o),v(!1)})).run()}else Cc.debug("Dropped file is null")})(e.dataTransfer.items,O||"")},onDragOver:e=>e.preventDefault(),onDragLeave:()=>q(!1)},t.createElement(p,{textAlign:"center",color:"inherit",variant:"h5"},"Drag and drop your files to start uploading")))))):t.createElement(p,{textAlign:"center",color:"inherit",variant:"h5"},"File storage is not available")))}function Fc(e){if(se(e))return"-";if(0===e)return`0 ${Oc[0]}`;const t=Math.floor(Math.log(e)/Math.log(kc));return`${parseFloat((e/Math.pow(kc,t)).toFixed(Mc))} ${Oc[t]}`}Tc.propTypes={connection:c.object,downloadEnabled:c.bool,uploadEnabled:c.bool};var Dc=r(Tc);const Ac=1e3,Bc={MINUTE:60};Bc.HOUR=Bc.MINUTE**2,Bc.DAY=24*Bc.HOUR;const Nc=(e,t)=>Math.floor(e/t),_c={just_now:{limit:10,updateInterval:1,text:e=>"now"},less_than_min:{limit:Bc.MINUTE,updateInterval:1,text:e=>"< 1m ago"},n_min_ago:{limit:Bc.HOUR,updateInterval:30,text:e=>`${Nc(e,Bc.MINUTE)}m ago`},n_hours_ago:{limit:Bc.DAY,updateInterval:15*Bc.MINUTE,text:e=>`${Nc(e,Bc.HOUR)}h ago`},n_days_ago:{text:e=>`${Nc(e,Bc.DAY)}d ago`}};function Pc(){const[e,r]=t.useState([]),o=e=>function(e,t,n){return Number.isFinite(e)&&e>=t&&e<=n}(e,0,100)?t.createElement(B,{value:e}):null;return n((()=>{const e=e=>r(Array.isArray(e)?e:[]);return Z.on("notifications-update",e),()=>{Z.off("notifications-update",e)}}),[]),t.createElement(l,{position:"bottom",size:"medium",fixedWidth:!0,triggerType:"custom",dismissButton:!1,content:e.length?t.createElement("div",{style:{maxHeight:Math.floor(.8*window.innerHeight),overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"2px 0"}},t.createElement(p,{fontSize:"heading-s",fontWeight:"normal",variant:"h2"},"Notifications"),t.createElement(u,{onClick:()=>{e.forEach((e=>{e.actions&&(e.actions.decline&&("function"==typeof e.actions.decline.callback&&e.actions.decline.callback(),e.actions.decline.remove&&Rs(e.id)),e.actions.dismissable&&Rs(e.id))}))}},"Clear all")),Object.values(xs).map((e=>e.importance)).sort(((e,t)=>t-e)).filter(((e,t,n)=>!t||e!==n[t-1])).map((n=>e.filter((e=>e.level.importance===n)).map((e=>t.createElement(p,{margin:{horizontal:"xxxs",vertical:"m"},key:e.id},t.createElement(D,null,t.createElement(p,null,(e=>{const n=t.createElement(d,{type:e.level.status},e.header||le(e.level.status));return"dismissable"in e.actions?t.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n,t.createElement("div",{style:{paddingLeft:"10px"}},t.createElement(u,{variant:"icon",iconName:"close",iconAlign:"right",onClick:()=>Rs(e.id)}))):n})(e)),e.timestamp&&t.createElement(Lc,{timestamp:e.timestamp}),e.description&&t.createElement(p,{margin:{top:"xxs"}},e.description),e.uploadedFiles&&t.createElement(p,{margin:{top:"s"}},`Files uploaded: ${e.uploadedFiles} / ${e.totalFiles} `),e.uploadedBytes&&t.createElement(p,{margin:{top:"s"}},`Bytes uploaded: ${Fc(e.uploadedBytes)} / ${Fc(e.totalBytes)}`),null!==e.progress&&t.createElement(p,{margin:{top:"s"}},o(e.progress)),("decline"in e.actions||"accept"in e.actions)&&t.createElement(p,{margin:{top:"s"}},(e=>{const n=Object.keys(e.actions).filter((e=>-1!==["accept","decline"].indexOf(e))).length,r=1===n?"flex-start":"space-between";return t.createElement("div",{style:{display:"flex",justifyContent:r}},"decline"in e.actions&&t.createElement(u,{onClick:()=>{"function"==typeof e.actions.decline.callback&&e.actions.decline.callback(),e.actions.decline.remove&&Rs(e.id)}},e.actions.decline.text),"accept"in e.actions&&t.createElement("div",null,t.createElement(u,{variant:"primary",onClick:()=>{"function"==typeof e.actions.accept.callback&&e.actions.accept.callback(),e.actions.accept.remove&&Rs(e.id)}},e.actions.accept.text)))})(e))))))))):t.createElement(p,{padding:{horizontal:"xxl",vertical:"m"},variant:"p",color:"text-status-inactive",textAlign:"center"},"No notifications to display")},t.createElement("div",{title:"Notifications"},t.createElement(A,{color:(()=>{let t="grey",n=-1;return e.forEach((e=>{e.level.importance>n&&(n=e.level.importance,t=e.level.color)})),t})()},e.length)))}var $c=r(Pc);function Lc(e){const[r,o]=t.useState((Date.now()-e.timestamp)/Ac),i=e=>Object.values(_c).find((t=>!("limit"in t)||e<t.limit)),a=e=>{o((Date.now()-e)/Ac)};return n((()=>{const t=i(r).updateInterval;let n=null;return t&&(n=setInterval(a,t*Ac,e.timestamp)),()=>{n&&(clearInterval(n),n=null)}}),[]),t.createElement(p,{variant:"small",textAlign:"right",display:"block",fontWeight:"light"},i(s=r).text(s));var s}function jc(){return jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jc.apply(null,arguments)}Lc.propTypes={timestamp:c.number};var zc=({styles:e={},...n})=>t.createElement("svg",jc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},n),t.createElement("g",{stroke:"#545b64",strokeWidth:"2"},t.createElement("path",{d:"M12 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H9.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",strokeLinejoin:"round",fill:"none"}),t.createElement("circle",{cx:"12",cy:"3.5",r:"2.5",strokeMiterlimit:"10",fill:"none"}),t.createElement("circle",{cx:"4",cy:"3.5",r:"2.5",fill:"#545b64",strokeMiterlimit:"10"}),t.createElement("path",{d:"M4 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H1.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",fill:"#545b64",strokeLinejoin:"round"})));function Wc(){return Wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wc.apply(null,arguments)}var Uc=({styles:e={},...n})=>t.createElement("svg",Wc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},n),t.createElement("g",{fill:"none",stroke:"#545b64",strokeWidth:"2"},t.createElement("circle",{cx:"8",cy:"3.5",r:"2.5",strokeMiterlimit:"10"}),t.createElement("path",{d:"M8 8h0a3 3 0 013 3v3.14a.86.86 0 01-.86.86H5.86a.86.86 0 01-.86-.86V11a3 3 0 013-3z",strokeLinejoin:"round"})));let Vc=[];const qc=e=>{Vc=[];const t=e.length;for(let r=0;r<t;r++){const t=Vc.find((t=>t.username===e[r].username));t?t.connectionIds.push(e[r].connectionId):Vc.push({username:(n=e[r]).username,connectionIds:[n.connectionId],owner:n.owner})}var n;Vc.sort(((e,t)=>e.username<t.username?-1:1))},Hc=e=>{Z.emit("collaboration-status-update",e.length>1)},Gc=e=>{if(0!==Vc.length){const t=e.map((e=>e.connectionId)),n=Vc.map((e=>e.connectionIds)).flat();(e=>{let t,n;e.forEach((e=>{const r=Vc.find((t=>t.connectionIds.includes(e)));n=r.owner?"Session owner":"Collaborator",t=`${n} '${r.username}' has disconnected from this session.`,Cs({level:xs.INFO,header:"Client disconnected.",description:t,actions:{dismissable:!0}})}))})(n.filter((e=>!t.some((t=>e===t)))));const r=e.filter((e=>!n.some((t=>e.connectionId===t))));(e=>{let t,n;e.forEach((e=>{n=e.owner?"Session owner":"Collaborator",t=`${n} '${e.username}' has joined this session.`,Cs({level:xs.INFO,header:"New client connected.",description:t,actions:{dismissable:!0}})}))})(r)}};function Qc(){Z.emit("collaborator-list-update",Vc)}function Kc(e,t){t.forEach((t=>{t!==e.id&&e.disconnectCollaborator(t)}))}function Yc({connection:e}){const[r,o]=t.useState([]),[i,a]=t.useState(!1);return n((()=>{const t=t=>{a(t.some((t=>t.owner&&t.connectionIds.includes(e.id)))),o(t)};return Z.on("collaborator-list-update",t),Qc(),()=>{Z.off("collaborator-list-update",t)}}),[]),t.createElement(l,{position:"bottom",size:"medium",triggerType:"custom",dismissButton:!1,content:r.length?t.createElement("div",{style:{maxHeight:Math.floor(.8*window.innerHeight),overflow:"auto"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"2px 0 15px"}},t.createElement(p,{fontSize:"heading-s",fontWeight:"normal",variant:"h2"},"Collaborators"),i&&r.length>2&&t.createElement("div",{style:{marginLeft:"30px"}},t.createElement(u,{onClick:()=>function(e){Vc.forEach((t=>Kc(e,t.connectionIds)))}(e)},"Disconnect all"))),t.createElement(D,null,r.map((n=>n.username&&(n=>{const r=n.connectionIds.length>1&&n.connectionIds.includes(e.id)||i&&n.connectionIds.includes(e.id)&&n.connectionIds.length>1||i&&!n.connectionIds.includes(e.id);return t.createElement(p,{key:n.username},t.createElement("div",{style:{display:"flex",justifyContent:"space-between",minWidth:"150px"}},t.createElement("div",{style:{display:"flex",alignItems:"center"}},t.createElement(T,{svg:t.createElement(Uc,null),size:"small"}),t.createElement("div",{style:{maxWidth:"200px"}},t.createElement(p,{fontSize:"body-m",fontWeight:"normal",variant:"p",margin:{left:"xs",right:"s"}},`${n.username}${n.connectionIds.length>1?` (${n.connectionIds.length} clients)`:""}`))),r&&t.createElement(u,{variant:"icon",iconName:"close",onClick:()=>Kc(e,n.connectionIds)})))})(n))))):t.createElement(p,{padding:{horizontal:"xxl",vertical:"m"},variant:"p",color:"text-status-inactive",textAlign:"center"},"No collaborators to display")},t.createElement("div",{title:"Collaborators"},t.createElement(T,{svg:t.createElement(zc,null)})))}Yc.propTypes={connection:c.object};var Zc=r(Yc);function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jc.apply(null,arguments)}var Xc=({styles:e={},...n})=>t.createElement("svg",Jc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M1 2h14v12H1zM4 11h8M4 5h2M7 5h2M10 5h2M4 8h2M7 8h2M10 8h2"}));const el="soft-kbd-div";let tl;function nl({connection:e}){const[r,o]=t.useState(!1),i=()=>{o(!0),tl.focus(),(it()||et())&&(tl.click(),window.scrollTo(0,0),document.body.scrollTop=0,document.scrollingElement.scrollTop=0)},a=()=>{tl=document.getElementById("dcv-softkbd-hid-input"),tl&&i()},s=()=>{const e=document.createElement("input");e.setAttribute("id","dcv-softkbd-hid-input"),e.setAttribute("type","text"),e.style.caretColor="transparent",e.style.color="transparent",e.style.background="transparent",e.style.border="none",e.style.fontSize="1pt",e.style.height="1px",e.style.width="1px",e.value="",tl=e};return n((()=>{var t;return r&&(t=e.sendKeyboardEvent.bind(e),tl=document.getElementById("dcv-softkbd-hid-input"),tl&&(tl.addEventListener("focusout",a),tl.addEventListener("keydown",t),tl.addEventListener("keyup",t),tl.addEventListener("keypress",t))),()=>(e=>{tl=document.getElementById("dcv-softkbd-hid-input"),tl&&(tl.removeEventListener("focusout",a),tl.removeEventListener("keydown",e),tl.removeEventListener("keyup",e),tl.removeEventListener("keypress",e))})(e.sendKeyboardEvent.bind(e))}),[e,r]),n((()=>(s(),()=>{tl=null,o(!1)})),[]),t.createElement("div",{title:"Virtual keyboard"},t.createElement(u,{iconSvg:t.createElement(Xc,null),variant:"icon",onClick:()=>{r?(tl=document.getElementById("dcv-softkbd-hid-input"),tl&&(tl.blur(),document.getElementById(el).removeChild(tl)),o(!1)):(tl=document.getElementById("dcv-softkbd-hid-input"),tl||s(),document.getElementById(el).appendChild(tl),i())}}))}nl.propTypes={connection:c.object};var rl=r(nl);function ol(e,t){return ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ol(e,t)}function il(e){return il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},il(e)}function al(e,t){if(t&&("object"===il(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function sl(e){return sl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sl(e)}var cl,ll,dl,ul,ml={exports:{}};function pl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sl(e);if(t){var o=sl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return al(this,n)}}ml.exports=function(){if(ul)return dl;ul=1;var e=ll?cl:(ll=1,cl="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");function t(){}function n(){}return n.resetWarningCache=t,dl=function(){function r(t,n,r,o,i,a){if(a!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function o(){return r}r.isRequired=r;var i={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:t};return i.PropTypes=i,i}}()();var hl,fl,gl,bl=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ol(e,t)}(r,t.PureComponent);var e,n=pl(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this,e)).container=null,t.window=null,t.windowCheckerInterval=null,t.released=!1,t.state={mounted:!1},t}return(e=[{key:"render",value:function(){return this.state.mounted?G.createPortal(this.props.children,this.container):null}},{key:"componentDidMount",value:function(){this.window||this.container||(this.openChild(),this.setState({mounted:!0}))}},{key:"openChild",value:function(){var e,t=this,n=this.props,r=n.url,o=n.title,i=n.name,a=n.features,s=n.onBlock,c=n.onOpen,l=n.center;if("string"!=typeof l||void 0!==a.width&&void 0!==a.height){if("parent"===l)a.left=window.top.outerWidth/2+window.top.screenX-a.width/2,a.top=window.top.outerHeight/2+window.top.screenY-a.height/2;else if("screen"===l){var d=void 0!==window.screenLeft?window.screenLeft:window.screen.left,u=void 0!==window.screenTop?window.screenTop:window.screen.top,m=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,p=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;a.left=m/2-a.width/2+d,a.top=p/2-a.height/2+u}}else console.warn("width and height window features must be present when a center prop is provided");if(this.window=window.open(r,i,(e=a,Object.keys(e).reduce((function(t,n){var r=e[n];return"boolean"==typeof r?t.push("".concat(n,"=").concat(r?"yes":"no")):t.push("".concat(n,"=").concat(r)),t}),[]).join(","))),this.container=this.window.document.createElement("div"),this.windowCheckerInterval=setInterval((function(){t.window&&!t.window.closed||t.release()}),50),this.window){if(this.window.document.title=o,this.container=this.window.document.getElementById("new-window-container"),null===this.container)this.container=this.window.document.createElement("div"),this.container.setAttribute("id","new-window-container"),this.window.document.body.appendChild(this.container);else{var h=this.window.document.getElementById("new-window-container-static");this.window.document.body.removeChild(h)}this.props.copyStyles&&setTimeout((function(){return e=document,n=t.window.document,r=n.createDocumentFragment(),Array.from(e.styleSheets).forEach((function(e){var t;try{t=e.cssRules}catch(e){console.error(e)}if(t){var o=[];Array.from(e.cssRules).forEach((function(e){var t=e.type;if(t!==CSSRule.UNKNOWN_RULE){var n;n=t===CSSRule.KEYFRAMES_RULE?function(e){var t=["@keyframes",e.name,"{"];return Array.from(e.cssRules).forEach((function(e){t.push(e.keyText,"{",e.style.cssText,"}")})),t.push("}"),t.join(" ")}(e):[CSSRule.IMPORT_RULE,CSSRule.FONT_FACE_RULE].includes(t)?function(e){return e.cssText.split("url(").map((function(e){return"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e})).join("url(")}(e):e.cssText,o.push(n)}}));var i=n.createElement("style");i.textContent=o.join("\n"),r.appendChild(i)}else if(e.href){var a=n.createElement("link");a.rel="stylesheet",a.href=e.href,r.appendChild(a)}})),void n.head.appendChild(r);var e,n,r}),0),"function"==typeof c&&c(this.window),this.window.addEventListener("beforeunload",(function(){return t.release()}))}else"function"==typeof s?s(null):console.warn("A new window could not be opened. Maybe it was blocked.")}},{key:"componentWillUnmount",value:function(){if(this.state.mounted&&this.window)if(this.props.closeOnUnmount)this.window.close();else if(this.props.children){var e=this.container.cloneNode(!0);e.setAttribute("id","new-window-container-static"),this.window.document.body.appendChild(e)}}},{key:"release",value:function(){if(!this.released){this.released=!0,clearInterval(this.windowCheckerInterval);var e=this.props.onUnload;"function"==typeof e&&e(null)}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(r.prototype,e),r}();function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vl.apply(null,arguments)}gl={url:"",name:"",title:"",features:{width:"600px",height:"640px"},onBlock:null,onOpen:null,onUnload:null,center:"parent",copyStyles:!0,closeOnUnmount:!0},(fl="defaultProps")in(hl=bl)?Object.defineProperty(hl,fl,{value:gl,enumerable:!0,configurable:!0,writable:!0}):hl[fl]=gl,bl.propTypes={children:ml.exports.node,url:ml.exports.string,name:ml.exports.string,title:ml.exports.string,features:ml.exports.object,onUnload:ml.exports.func,onBlock:ml.exports.func,onOpen:ml.exports.func,center:ml.exports.oneOf(["parent","screen"]),copyStyles:ml.exports.bool,closeOnUnmount:ml.exports.bool};var yl=({styles:e={},...n})=>t.createElement("svg",vl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M5.5 12v3M.5 15h10M1 5h9v7H1z"}),t.createElement("path",{d:"M5 4V1h9v7h-4"}));function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wl.apply(null,arguments)}var El=({styles:e={},...n})=>t.createElement("svg",wl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16","aria-hidden":"true"},n),t.createElement("path",{d:"M5.5 12v3M.5 15h10M5 1h9v7H5z"}),t.createElement("path",{d:"M5 5H1v7h9V8M11.75 2.25l-4.5 4.5M11.75 6.75l-4.5-4.5"}));const Sl=ie("Multiscreen");function xl({connection:e,copyEnabled:r,pasteEnabled:o,appearanceMode:i,toolbarBehavior:a,pendingDisplays:s}){const[c,l]=t.useState(!1),[d,m]=t.useState(null),p=()=>{Z.emit("close-secondary-display")},h=()=>{const t=zl();l(!1),t&&e&&(jl(null),e.detachDisplay(t)),d&&!d.closed&&(d.close(),m(null))};return n((()=>(Z.on("close-secondary-display",h),()=>{Z.off("close-secondary-display",h)})),[d,e]),t.createElement(t.Fragment,null,t.createElement("div",{title:"Multiple screens"},t.createElement(u,{iconSvg:c?t.createElement(El,null):t.createElement(yl,null),variant:"icon",onClick:()=>{c?h():l(!0)}})),c&&t.createElement(bl,{features:{height:window.innerHeight,width:window.innerWidth},name:"DCV Secondary Window",title:`${e.getServerInfo().hostname} - Amazon DCV`,onUnload:p,onBlock:p,onOpen:t=>{t.opener=null,m(t),Z.once("open-secondary-display",(()=>(t=>{t?s.length?(jl(s[0]),e.attachDisplay(t,{displayDivName:"dcv-display",displayId:s[0]}).then((e=>jl(e))).catch((e=>{Sl.error(`Cannot open secondary display (Error: ${e.code} ${e.message})`),h()}))):e.attachDisplay(t,{displayDivName:"dcv-display"}).then((e=>jl(e))).catch((e=>{Sl.error(`Cannot open secondary display (Error: ${e.code} ${e.message})`),h()})):h()})(t)))},closeOnUnmount:!0},t.createElement(Wl,{isPrimary:!1,connection:e,copyEnabled:r,pasteEnabled:o,window:d,appearanceMode:i,toolbarBehavior:a})))}xl.propTypes={connection:c.object,copyEnabled:c.bool,pasteEnabled:c.bool,appearanceMode:c.oneOf([ve,ge,be]),toolbarBehavior:c.oneOf([pe.label,he.label,fe.label]),pendingDisplays:c.arrayOf(c.number)};var kl=r(xl);const Ml=ie("Viewer"),Ol={position:"relative",margin:"auto",outline:"none"},Cl={height:"100%",overflow:"hidden",position:"relative"},Rl={position:"absolute",width:"100%",zIndex:1e3,pointerEvents:"all"},Il={display:"flex",flexFlow:"row wrap",alignItems:"center","--gap":"32px",marginLeft:"calc(var(--gap) / -2)",marginBottom:"calc(var(--gap) / -2)"},Tl={marginLeft:"calc(var(--gap) / 2)",marginBottom:"calc(var(--gap) / 2)"};let Fl,Dl,Al=[],Bl=null,Nl=null;function _l({isPrimary:r,connection:i,copyEnabled:c,pasteEnabled:l,window:d,appearanceMode:u,toolbarBehavior:m,uiConfig:f}){const[g,b]=t.useState(!0),[v,y]=t.useState(!1),[E,S]=t.useState(!1),[x,k]=t.useState(!1),[M,O]=t.useState(""),[C,R]=t.useState(""),[I,T]=t.useState(""),[F,D]=t.useState(""),[A,B]=t.useState(Ie.selectedWebcamId),[_,j]=t.useState(c||!1),[z,W]=t.useState(!1),[H,G]=t.useState(l||!1),[Q,K]=t.useState(Ie.metricsEnabled),[Y,J]=t.useState(!1),[X,ee]=t.useState(!1),[te,ne]=t.useState(!1),[re,oe]=t.useState(!1),[ae,le]=t.useState(!1),[de,fe]=t.useState(!1),[ge,be]=t.useState(!1),[ye,we]=t.useState(!1),[xe,ke]=t.useState(null),[Me,Be]=t.useState(Ie.appearanceMode),[Ne,_e]=t.useState(Ie.toolbarBehavior),[$e,Le]=t.useState(0),[je,ze]=t.useState(""),[We,Ue]=t.useState(!1),[Ve,qe]=t.useState(!1),He=o(null),Ge=o(null),Qe=a((e=>!f||!ce(f.toolbar)||!(e in f.toolbar)||f.toolbar[e]),[f]),Ke=()=>{ms(i,d,r)},Ye=e=>{Ml.info(`network interruption alert: ${e}`),Ue(e)},Ze=e=>{Ml.info(`network offline alert: ${e}`),qe(e)},Je=(e,t,n)=>{(se(n)||0===n)&&(y(t),i.setDisplayQuality(Ie.minQuality,Ie.maxQuality),i.setMaxDisplayResolution(Ie.maxDisplayWidth,Ie.maxDisplayHeight),i.setMinDisplayResolution(Ie.minDisplayWidth,Ie.minDisplayHeight),as=e,i.setKeyboardQuirks({macOptionToAlt:Ie.macOptionToAlt,macCommandToControl:Ie.macCommandToControl,forceKeyboardCombinations:Ie.forceKeyboardCombinations})),r||Fl?(be(!0),we(!0)):Ml.info(`Received first frame for an unknown displayId: ${n}`)},et=t=>{Le(t.setting);const n=t.status;n&&je!==n&&(ze(n),n===e.TimezoneRedirectionStatus.PERMISSION_ERROR?Cs({level:xs.WARNING,header:"Time Zone Redirection.",description:"This user does not have permission to perform this operation.",actions:{dismissable:!0}}):n===e.TimezoneRedirectionStatus.GENERIC_ERROR&&Cs({level:xs.WARNING,header:"Time Zone Redirection.",description:"The setting could not be saved. Please try again.",actions:{dismissable:!0}}))},tt=(e,t,n)=>{const o=r||se(n)||1===n.length?e:n[1].rect.width,i=r||se(n)||1===n.length?t:n[1].rect.height;ws(n),-1!==[Ee,Se].indexOf(Ie.selectedResolution)?O(ps(o,i)):O(Ie.selectedResolution),ys(o,i,d,r)},nt=a((e=>{!function(e,t,n,r){if(t===Ee)Ie.dynamicResolution=!0,ms(e,n,r);else if(Ie.dynamicResolution=!1,t!==Se){const n=hs(t);Es(e,n[0],n[1],r)}Te()}(i,e,d,r)}),[i,d,r]),ot=e=>{R(e.remote),"busy"===e.remote?Bl=Cs({level:xs.WARNING,header:"Audio input unavailable.",description:"This browser or session does not support audio input.",actions:{dismissable:!0}},Bl):$l()},it=e=>{T(e.remote),e.enabled?null!==Nl&&(Rs(Nl),Nl=null):(Nl=Cs({level:xs.WARNING,header:"Audio output unavailable.",description:"This browser or session does not support audio output.",actions:{dismissable:!0}},Nl),$l())},at=e=>{D(e.serviceStatus)},st=({message:e,code:n})=>{Cs({level:xs.ERROR,header:"Webcam error.",description:t.createElement("div",null,"Webcam could not be attached.",t.createElement("br",null),"Error: ",e," (code: ",n,")"),actions:{dismissable:!0}})},ct=e=>{j(e.enabled)},lt=e=>{G(e.enabled)},dt=e=>{y(e.enabled)},ut=e=>{ee(e.enabled)},mt=e=>{ne(e.enabled)},pt=e=>{k(e.enabled)},ht=e=>{const t=e.currentTarget.getBoundingClientRect();e.clientY===t.top&&(be(!0),d.document.getElementById("dcv-display").blur())},ft=()=>{be(!1)},gt=()=>{Ge.current=setTimeout((()=>{be(!1)}),1500)},vt=()=>{clearTimeout(Ge.current)},yt=a((()=>{He.current?.focus()}),[He]),wt=e=>{fe(e)},Et=e=>{if(!e.enabled){const e=d.document.getElementById("dcv-softkbd-hid-input");e&&d.document.getElementById("soft-kbd-div").removeChild(e)}oe(e.enabled)},St=e=>{ke(e.matches?P.Dark:P.Light),Me===ve&&Ce(e,d.document.body)},xt=(e,t)=>{const n=Al.indexOf(e);t.closed?(-1!==n&&Al.splice(n,1),e===Dl&&Z.emit("close-secondary-display")):t.enabled?Fl=e===Dl:-1===n&&Al.push(e)};n((()=>$(L.Compact,d.document.body)),[d]),n((()=>(r&&Z.on("filestorage-enabled",J),()=>{r&&Z.off("filestorage-enabled",J)})),[r]),n((()=>(i&&(Z.on("first-frame",Je),Z.on("network-quality-warning",Ye),Z.on("network-quality-critical",Ze),r?(!function(e){Fe=ie("Feature Handler"),De=e}(i),Z.on("display-availability",xt),Pe("audio-in",ot),Pe("audio-out",it),Pe("webcam",at),Pe("webcam-error",st),Pe("clipboard-copy",ct),Pe("clipboard-paste",lt),Pe("relative-mouse",dt),Pe("file-download",ut),Pe("file-upload",mt),Pe("display-multi",(e=>le(e.enabled&&!rt()&&!Xe()))),Pe("keyboard-sas",(e=>S(e.enabled))),Pe("screenshot",pt),Pe("timezone-redirection",et)):Z.emit("open-secondary-display")),()=>{Z.off("first-frame",Je),Z.off("network-quality-warning",Ye),Z.off("network-quality-critical",Ze),r&&(Z.off("display-availability",xt),Ae={})})),[i,r]),n((()=>{if(!g){const e=()=>ms(i,d,r);if(Fl&&Al.length){const t=Al.indexOf(Dl);-1!==t&&Al.splice(t,1),setTimeout(e,500)}else r&&ws([{name:"",rect:{x:0,y:0,width:800,height:600},primary:!1}]),e()}}),[g]),n((()=>(Z.on("collaboration-status-update",W),()=>{Z.off("collaboration-status-update",W)}))),n((()=>(Z.on("display-layout",tt),()=>{Z.off("display-layout",tt)})),[Ne,i,d,r]),n((()=>{i&&(rt()||Xe())&&Pe("keyboard",Et)}),[i,d]),n((()=>{const e=()=>{Z.emit("close-secondary-display"),i&&i.disconnect()};return r&&d.addEventListener("pagehide",e),()=>{r&&d.removeEventListener("pagehide",e)}}),[i,d,r]),n((()=>(ye&&(d.addEventListener("resize",Ke),de&&Ne===he.label||Ne===pe.label?(d.document.getElementById("dcv-container")&&d.document.getElementById("dcv-container").addEventListener("mousemove",ht),d.document.getElementById("dcv-display")&&d.document.getElementById("dcv-display").addEventListener("focusin",ft),d.document.getElementById("dcv-toolbar-container")&&(d.document.getElementById("dcv-toolbar-container").addEventListener("mouseleave",gt),d.document.getElementById("dcv-toolbar-container").addEventListener("mousemove",vt)),be(!1)):(clearTimeout(Ge.current),be(!0)),b(!1)),()=>{d.removeEventListener("resize",Ke),d.document.getElementById("dcv-container")&&d.document.getElementById("dcv-container").removeEventListener("mousemove",ht),d.document.getElementById("dcv-display")&&d.document.getElementById("dcv-display").removeEventListener("focusin",ft),d.document.getElementById("dcv-toolbar-container")&&(d.document.getElementById("dcv-toolbar-container").removeEventListener("mouseleave",gt),d.document.getElementById("dcv-toolbar-container").removeEventListener("mousemove",vt))})),[ye,Ne,de,i,r,d]),n((()=>{g&&!ge||ms(i,d,r)}),[Ne,de]),n((()=>{const e=Oe();return Re(Me,d.document.body),e&&(ke(e.matches?P.Dark:P.Light),e.addEventListener("change",St)),()=>{e&&e.removeEventListener("change",St)}}),[Me]),n((()=>{u&&Be(u)}),[u]),n((()=>{m&&_e(m)}),[m]);const kt=s((()=>t.createElement(h,{direction:"horizontal",size:"m"},r&&Y&&t.createElement(Dc,{connection:i,downloadEnabled:X,uploadEnabled:te}),(_||H)&&t.createElement(bt,{connection:i,copyEnabled:_,pasteEnabled:H,currentWindow:d}),r&&Pl(C)&&Pl(I)&&t.createElement(Hs,{connection:i}),r&&Pl(I)&&t.createElement(nc,{connection:i}),r&&me(F)&&t.createElement(yc,{connection:i,status:F,selectedWebcam:A,setSelectedWebcam:B}),r&&ae&&Qe("multimonitorButton")&&t.createElement(kl,{connection:i,copyEnabled:_,pasteEnabled:H,appearanceMode:Me,toolbarBehavior:Ne,pendingDisplays:Al}),Qe("fullscreenButton")&&t.createElement(rs,{setFullscreen:wt,currentDocument:d.document}))),[r,Y,i,X,te,_,H,C,I,F,A,B,ae,_,H,Me,Ne,Al,wt,Qe,d]),Mt=s((()=>t.createElement(p,{textAlign:"center"},t.createElement(lc,{connection:i}))),[i]),Ot=s((()=>t.createElement(p,{float:"right"},t.createElement("div",{style:Il},r&&re&&Ll(t.createElement(rl,{connection:i})),r&&z&&Ll(t.createElement(Zc,{connection:i})),Ll(t.createElement($c,null)),Ll(t.createElement(zs,{connection:i,relativeMouseModeEnabled:v,sasEnabled:E,focusDisplay:yt,screenshotEnabled:x,currentResolution:M,submitResolutionPreferences:nt,submitMetricsPreferences:K,submitAppearanceModePreferences:Be,submitToolbarBehaviorPreferences:_e,webcamStatus:F,webcamId:A,setWebcamId:B,systemDefaultAppearanceMode:xe,timezoneRedirectionSetting:$e}))))),[r,re,i,z,v,E,x,M,F,A,xe,$e]),Ct=s((()=>t.createElement(p,{display:ge?"block":"none",padding:{left:"s",right:"s",top:"xs",bottom:"xs"}},t.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},kt,r&&Q&&Mt,r&&Ot))),[ge,kt,r,Q,Mt,Ot]),Rt=s((()=>t.createElement("div",{id:"dcv-toolbar-container",style:{backgroundColor:U,borderBottom:`1px solid ${V}`,...Ne===pe.label||de&&Ne===he.label?Rl:{}}},Ct)),[Ne,de,Ct]),It=s((()=>t.createElement("div",{style:{backgroundColor:q}},t.createElement("div",{style:{height:ue(d)-1}},t.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"}},t.createElement(h,{size:"m"},t.createElement(p,{textAlign:"center"},t.createElement(N,{size:"large"})),t.createElement(p,{fontWeight:"light",variant:"h1"},"Connecting")))))),[d]),Tt=s((()=>t.createElement("div",{style:{display:We?"block":"none",zIndex:"1009",position:"absolute",top:"4%",left:"50%",transform:"translate(-50%, -50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"}},t.createElement(w,{type:"warning",header:"Network connection is unstable"},"Please check your network connection or VPN."))),[d,We]),Ft=s((()=>t.createElement("div",{style:{display:Ve?"block":"none",zIndex:"1009",position:"absolute",top:"4%",left:"50%",transform:"translate(-50%, -50%)",WebkitTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)"}},t.createElement(w,{type:"error",header:"Network connection is not available"},"Please check your network connection or VPN."))),[d,Ve]);return t.createElement("div",{id:"dcv-container",style:Cl},g&&!ge?It:Qe("visible")&&Rt,Tt,Ft,t.createElement("div",{style:{display:g&&!ge?"none":"block",backgroundColor:q}},t.createElement("div",{id:"dcv-display-frame",style:{height:fs(d),width:gs(d),overflow:Ie.scaleToFit?"hidden":"auto"}},t.createElement("div",{id:"dcv-display",ref:He,style:Ol})),t.createElement("div",{id:"dcv-resource",tabIndex:"-1"}),t.createElement("div",{id:"soft-kbd-div",style:{position:"absolute",top:0,zIndex:-1e3}})))}function Pl(e){return-1!==["available","active"].indexOf(e)}function $l(){null!==Bl&&(Rs(Bl),Bl=null)}function Ll(e){return t.createElement("div",{style:Tl},e)}function jl(e){if(null===e){const e=Al.indexOf(Dl);-1!==e&&Al.splice(e,1)}Dl=e}function zl(){return Dl}_l.propTypes={isPrimary:c.bool,connection:c.object,copyEnabled:c.bool,pasteEnabled:c.bool,window:c.object,appearanceMode:c.oneOf([ve,ge,be]),toolbarBehavior:c.oneOf([pe.label,he.label,fe.label]),uiConfig:c.exact({toolbar:c.exact({visible:c.bool,fullscreenButton:c.bool,multimonitorButton:c.bool})})};var Wl=r(_l);const Ul=ie("License Handler");let Vl=null;function ql(e){let t=365,n="",r={};e.licenses.forEach((e=>{e.isDemo&&Ul.info(`License status: product '${e.product}' is using a demo license (${e.leftDays} days left)`),e.leftDays>0&&e.leftDays<t&&(t=e.leftDays,n=e.product)})),0===e.numUnlicensed?(Ul.debug(`License status: ${e.licenses.length} products licensed`),r.level=xs.INFO,"demo"===e.licensingMode&&t<7?r.header="DCV demo license.":r.header="DCV license.",t<7?(Ul.info(`License status: product '${n}' will expire in ${t} days`),r.description=`License of '${n}' will expire in ${t} days.`):"demo"===e.licensingMode&&(r.description="DCV is running with a demo license.")):(Ul.warn(`License error (mode: ${e.licensingMode}), ${e.numUnlicensed}/${e.licenses.length} products unlicensed: ${JSON.stringify(e.licenses)}`),r.header="No license available.","ec2"===e.licensingMode?(r.level=xs.WARNING,r.description="Please, check your EC2 configuration.",null!==e.documentationUrl&&""!==e.documentationUrl&&(r.actions={},r.actions.accept={text:"See documentation",callback:()=>{const t=document.createElement("a");t.href=e.documentationUrl,t.target="_blank",t.click()}})):(r.level=xs.ERROR,r.description="Please, contact the administrator.")),r.description&&(Vl=Cs(r,Vl))}const Hl=ie("Printer");function Gl(e){Cs({level:xs.INFO,header:"File printed.",description:`${e.id} has been converted in printable format.`,actions:{accept:{text:"Download",callback:()=>{return t=e,Hl.debug(`Accepting print resource ${t.id}`),void t.accept({disposition:"attachment"});var t},remove:!0},decline:{text:"Decline",callback:()=>{return t=e,Hl.debug(`Removing print resource ${t.id}`),void t.decline();var t},remove:!0}}}),Hl.debug(`Added printer notification for resource ${e.id}`)}const Ql=ie("DCVViewer");let Kl,Yl;function Zl(r){const[i,a]=t.useState(null),s=o(i),c=e=>{ae(r.dcv.onDisconnect)&&r.dcv.onDisconnect(e),s.current=null},l=e=>{let t,n=`${se(e.namespace)?"":`${e.namespace}::`}${e.name}`;0!==Ie.customChannels.length&&-1!==(()=>{const t=[];return Ie.customChannels.forEach((n=>{if(se(e.namespace)){const e=n.split("::",2);t.push(e[e.length-1])}else t.push(n)})),t})().indexOf(n)?i.openChannel(e.name,e.authToken,{onMessageReceived:e=>{Ql.info(`Custom channel: received message ${new TextDecoder("utf-8").decode(e)}`),t(e)},onClose:e=>Ql.info(`Custom channel closed: ${JSON.stringify(e)}`)},e.namespace).then((e=>{Ql.info(`Opened custom channel ${e.channelName}`),t=t=>{e.sendMessage(t).then((()=>{Ql.info("Success sending message.")})).catch((e=>{Ql.error(`Failed to send message: ${JSON.stringify(e)}`)}))}})).catch((e=>{Ql.error(`Failed to open custom channel: ${e.message}`)})):Ql.info(`Custom channel '${n}' not supported`)},d=()=>{Ql.info("Calling client.connect"),e.connect({url:r.dcv.serverUrl,sessionId:r.dcv.sessionId,authToken:r.dcv.authToken,enabledChannels:Ie.enabledChannels,displayCodecs:Ie.displayCodecs,divId:"dcv-display",showDebugLayer:Ie.debugLayer,enableGraphicsDebugLayer:Ie.enableGraphicsDebugLayer,clientHiDpiScaling:Ie.clientHiDpiScaling,enableHighPixelDensity:Ie.enableHighPixelDensity,enableWebCodecs:Ie.enableWebCodecs,highColorAccuracy:Ie.highColorAccuracy,losslessColorspace:Ie.losslessColorspace,baseUrl:r.dcv.baseUrl,resourceBaseUrl:r.dcv.resourceBaseUrl||"",extensionData:r.dcv.extensionData||"",volumeLevel:Ie.volume,audioBitrate:Ie.audioBitrate,fingerRadius:Ie.fingerRadius,clipboardAutoSync:!0,dynamicAudioTuning:!0,observers:{displayLayout:(e,t,n)=>{Z.emit("display-layout",e,t,n)},firstFrame:(e,t,n)=>{Z.emit("first-frame",e,t,n)},displayAvailability:(e,t)=>{Z.emit("display-availability",e,t)},disconnect:c,licenseNotification:ql,idleWarningNotification:e=>{!function(e){let t;e?(t=`DCV connection is idle and is going to be disconnected at ${e.toString()}`,Ql.info(t),Kl=Cs({level:xs.WARNING,header:"Idle timeout.",description:t,actions:{dismissable:!0}},Kl)):Kl&&(Rs(Kl),Kl=null)}(e)},dataChannel:e=>{Z.emit("custom-channel",e)},filePrinted:e=>{Gl(e)},fileDownload:e=>{Z.emit("file-download",e)},qualityIndicatorState:e=>{Ql.info(`Quality Indicators: ${JSON.stringify(e)}`),function(e){let n=0,r=[],o="Quality status update.";switch(e.indicators.forEach((e=>{r.push(t.createElement(p,{key:e.name},`${e.name.replace("_"," ")} status: ${e.status}`)),e.changed&&Ql.info(`Indicator ${e.name} has changed to status ${e.status}`),e.status>n&&(n=e.status)})),Ql.info(`Current Quality Indicator overall alarm state: ${n}`),n){case 1:Yl=Cs({level:xs.WARNING,header:o,description:r,actions:{dismissable:!0}},Yl);break;case 2:Yl=Cs({level:xs.ERROR,header:o,description:r,actions:{dismissable:!0}},Yl);break;default:Yl&&(Rs(Yl),Yl=null)}}(e)},filestorageEnabled:e=>{Z.emit("filestorage-enabled",e)},clipboardEvent:e=>{Z.emit("clipboard",e)},deviceChangeEvent:function(){Z.emit("device-change")},featuresUpdate:_e,screenshot:e=>{Z.emit("screenshot",e)},collaboratorList:e=>{var t;Hc(t=e),Gc(t),qc(t),Qc()},networkQualityChange:e=>{!function(e){switch(Ql.info(`Network Quality Change: ${e.quality}`),e.quality){case"WARNING":Jl("network-quality-warning");break;case"CRITICAL":Jl("network-quality-critical");break;default:Jl()}}(e)}}}).then((e=>{a(e),s.current=e,document.title=`${e.getServerInfo().hostname} - Amazon DCV`})).catch((e=>{Ql.error(`client.connect was rejected (${e.message})`),ae(r.dcv.onDisconnect)&&r.dcv.onDisconnect(e.message),s.current=null}))};return n((()=>{r.dcv.sessionId&&r.dcv.authToken&&!i&&(ne.setLevel(r.dcv.logLevel),d())}),[r.dcv.sessionId,r.dcv.authToken]),n((()=>()=>{Ql.info("Calling connection.disconnect"),s.current&&s.current.disconnect()}),[]),n((()=>(Z.on("custom-channel",l),()=>{Z.off("custom-channel",l)})),[i]),t.createElement(Wl,{isPrimary:!0,connection:i,window:window,uiConfig:r.uiConfig})}function Jl(e=""){switch(Z.emit("network-quality-warning",!1),Z.emit("network-quality-critical",!1),e){case"network-quality-warning":case"network-quality-critical":Z.emit(e,!0);break;case"":break;default:Ql.warn(`Unknown input passed to emitNetworkQualitySignal: ${e}`)}}Zl.propTypes={dcv:c.exact({sessionId:c.string.isRequired,authToken:c.string.isRequired,serverUrl:c.string.isRequired,baseUrl:c.string.isRequired,resourceBaseUrl:c.string,extensionData:c.string,onDisconnect:c.func,logLevel:c.oneOf(Object.values(ne.levels))}).isRequired,uiConfig:c.exact({toolbar:c.exact({visible:c.bool,fullscreenButton:c.bool,multimonitorButton:c.bool})})};export{Zl as DCVViewer};
